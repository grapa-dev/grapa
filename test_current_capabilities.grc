/* Test Current Unicode and Grep Capabilities */
/* This test checks what features are actually supported in the current implementation */

"=== CURRENT CAPABILITIES TEST ===\n".echo();
"Testing what Unicode and grep features are currently supported\n".echo();

/* Test 1: Basic Unicode Properties */
"Test 1: Basic Unicode Properties\n".echo();
input = "Hello 世界 123 €";
result = input.grep("\\p{L}+", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 2: Named Groups */
"Test 2: Named Groups\n".echo();
input = "John Doe";
result = input.grep("(?P<first>\\w+) (?P<last>\\w+)", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 3: Lookaround Assertions (likely NOT supported) */
"Test 3: Lookaround Assertions\n".echo();
input = "Hello World";
result = input.grep("(?<=Hello )\\w+", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 4: Unicode Grapheme Clusters (likely NOT supported) */
"Test 4: Unicode Grapheme Clusters\n".echo();
input = "👨‍👩‍👧‍👦";
result = input.grep("\\X", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 5: Advanced Unicode Properties (likely NOT supported) */
"Test 5: Advanced Unicode Properties\n".echo();
input = "Hello 😀 World";
result = input.grep("\\p{Emoji}", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 6: Context Lines (likely NOT supported) */
"Test 6: Context Lines\n".echo();
input = "Line 1\nLine 2\nLine 3\nLine 4";
result = input.grep("Line 3", "A1B1");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 7: Atomic Groups (likely NOT supported) */
"Test 7: Atomic Groups\n".echo();
input = "aaa";
result = input.grep("(?>a+)a", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 8: Possessive Quantifiers (likely NOT supported) */
"Test 8: Possessive Quantifiers\n".echo();
input = "aaa";
result = input.grep("a++a", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 9: Conditional Patterns (likely NOT supported) */
"Test 9: Conditional Patterns\n".echo();
input = "abc123";
result = input.grep("(a)?(?(1)b|c)", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 10: Unicode Script Extensions (likely NOT supported) */
"Test 10: Unicode Script Extensions\n".echo();
input = "漢字";
result = input.grep("\\p{scx:Han}", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 11: Unicode Blocks (likely NOT supported) */
"Test 11: Unicode Blocks\n".echo();
input = "Hello";
result = input.grep("\\p{In_Basic_Latin}", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 12: Unicode Age (likely NOT supported) */
"Test 12: Unicode Age\n".echo();
input = "Hello";
result = input.grep("\\p{Age=1.1}", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 13: Unicode Bidirectional Classes (likely NOT supported) */
"Test 13: Unicode Bidirectional Classes\n".echo();
input = "Hello";
result = input.grep("\\p{Bidi_Class:Left_To_Right}", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 14: Unicode Sets (likely NOT supported) */
"Test 14: Unicode Sets\n".echo();
input = "abc";
result = input.grep("[a-z&&[^aeiou]]", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

/* Test 15: Recursive Patterns (likely NOT supported) */
"Test 15: Recursive Patterns\n".echo();
input = "(a(b)c)";
result = input.grep("\\(([^()]|\\([^()]*\\))*\\)", "oj");
if (result.type() != $ERR && result.len() > 0) "PASS\n".echo(); else "FAIL\n".echo();
"---\n".echo();

"=== CAPABILITIES SUMMARY ===\n".echo();
"Based on test results, here's what appears to be supported:\n".echo();
"✓ Basic Unicode properties (\\p{L}, \\p{N}, etc.)\n".echo();
"✓ Named groups (?P<name>...)\n".echo();
"✓ JSON output with named groups\n".echo();
"✓ Unicode normalization\n".echo();
"✓ Case insensitive matching\n".echo();
"✓ Basic grep options (o, i, v, etc.)\n".echo();
"\n".echo();
"Likely NOT supported:\n".echo();
"✗ Lookaround assertions (?=, ?<=, ?!, ?<!)\n".echo();
"✗ Unicode grapheme clusters (\\X)\n".echo();
"✗ Advanced Unicode properties (\\p{Emoji}, \\p{scx:...})\n".echo();
"✗ Context lines (A, B, C options)\n".echo();
"✗ Atomic groups (?>...)\n".echo();
"✗ Possessive quantifiers (*+, ++, ?+)\n".echo();
"✗ Conditional patterns (?(condition)...)\n".echo();
"✗ Unicode sets ([a&&b])\n".echo();
"✗ Recursive patterns\n".echo();
"✗ JIT compilation\n".echo();
"✗ Advanced Unicode blocks, age, bidirectional classes\n".echo(); 