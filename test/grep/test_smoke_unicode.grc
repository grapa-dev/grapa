/* Smoke Test: Basic Unicode Support
   - Runs on every build to verify basic Unicode functionality
   - Execution time: < 30 seconds
   - Purpose: Quick validation of Unicode support
   - Status: Critical for development workflow
*/

"=== SMOKE TEST: BASIC UNICODE SUPPORT ===\n".echo();
"Running basic Unicode validation...\n".echo();

/* Test 1: Basic Unicode characters */
"Test 1: Basic Unicode characters\n".echo();
input = "Hello ä¸–ç•Œ\nGoodbye ä¸–ç•Œ\nHello universe";
result = input.grep("ä¸–ç•Œ", "o");
("Input: " + input + "\n").echo();
("Pattern: ä¸–ç•Œ, Options: o\n").echo();
("Result: " + result.str() + "\n").echo();
("Expected: [\"ä¸–ç•Œ\", \"ä¸–ç•Œ\"]\n").echo();
("Status: " + (result.len() == 2 ? "PASS" : "FAIL") + "\n").echo();
"---\n".echo();

/* Test 2: Unicode case-insensitive */
"Test 2: Unicode case-insensitive\n".echo();
input2 = "cafÃ©\nCAFÃ‰\ncafe";
result = input2.grep("cafÃ©", "i");
("Input: " + input2 + "\n").echo();
("Pattern: cafÃ©, Options: i\n").echo();
("Result: " + result.str() + "\n").echo();
("Expected: All cafÃ© variations\n").echo();
("Status: " + (result.len() == 3 ? "PASS" : "FAIL") + "\n").echo();
"---\n".echo();

/* Test 3: Diacritic-insensitive */
"Test 3: Diacritic-insensitive\n".echo();
result = input2.grep("cafe", "d");
("Pattern: cafe, Options: d\n").echo();
("Result: " + result.str() + "\n").echo();
("Expected: All cafÃ© variations\n").echo();
("Status: " + (result.len() == 3 ? "PASS" : "FAIL") + "\n").echo();
"---\n".echo();

/* Test 4: Unicode normalization */
"Test 4: Unicode normalization\n".echo();
input3 = "cafÃ©\ncafe\u0301"; /* Ã© vs e + combining acute */
result = input3.grep("cafÃ©", "N");
("Input: " + input3 + "\n").echo();
("Pattern: cafÃ©, Options: N\n").echo();
("Result: " + result.str() + "\n").echo();
("Expected: Both cafÃ© forms\n").echo();
("Status: " + (result.len() == 2 ? "PASS" : "FAIL") + "\n").echo();
"---\n".echo();

/* Test 5: Emoji support */
"Test 5: Emoji support\n".echo();
input4 = "Hello ðŸ‘‹ world\nGoodbye ðŸ‘‹ universe";
result = input4.grep("ðŸ‘‹", "o");
("Input: " + input4 + "\n").echo();
("Pattern: ðŸ‘‹, Options: o\n").echo();
("Result: " + result.str() + "\n").echo();
("Expected: [\"ðŸ‘‹\", \"ðŸ‘‹\"]\n").echo();
("Status: " + (result.len() == 2 ? "PASS" : "FAIL") + "\n").echo();
"---\n".echo();

/* Test 6: Unicode word boundaries */
"Test 6: Unicode word boundaries\n".echo();
input5 = "Helloä¸–ç•Œ worldä¸–ç•Œ";
result = input5.grep("ä¸–ç•Œ", "w");
("Input: " + input5 + "\n").echo();
("Pattern: ä¸–ç•Œ, Options: w\n").echo();
("Result: " + result.str() + "\n").echo();
("Expected: Word boundary matches\n").echo();
("Status: " + (result.len() > 0 ? "PASS" : "FAIL") + "\n").echo();
"---\n".echo();

/* Test 7: Unicode script properties */
"Test 7: Unicode script properties\n".echo();
input6 = "Hello ä¸–ç•Œ 123 â‚¬";
result = input6.grep("\\p{Latin}", "o");
("Input: " + input6 + "\n").echo();
("Pattern: \\p{Latin}, Options: o\n").echo();
("Result: " + result.str() + "\n").echo();
("Expected: Latin script characters\n").echo();
("Status: " + (result.len() > 0 ? "PASS" : "FAIL") + "\n").echo();
"---\n".echo();

/* Test 8: Unicode combining marks */
"Test 8: Unicode combining marks\n".echo();
input7 = "e\u0301"; /* e + combining acute */
result = input7.grep("Ã©", "o");
("Input: " + input7 + "\n").echo();
("Pattern: Ã©, Options: o\n").echo();
("Result: " + result.str() + "\n").echo();
("Expected: Match combining mark sequence\n").echo();
("Status: " + (result.len() > 0 ? "PASS" : "FAIL") + "\n").echo();
"---\n".echo();

/* Test 9: Unicode grapheme clusters */
"Test 9: Unicode grapheme clusters\n".echo();
input8 = "Hello ðŸ‘‹ world ðŸŒ";
result = input8.grep("\\X", "o");
("Input: " + input8 + "\n").echo();
("Pattern: \\X, Options: o\n").echo();
("Result: " + result.str() + "\n").echo();
("Expected: Grapheme clusters\n").echo();
("Status: " + (result.len() > 0 ? "PASS" : "FAIL") + "\n").echo();
"---\n".echo();

/* Test 10: Unicode error handling */
"Test 10: Unicode error handling\n".echo();
input9 = "Hello\xFF\xFEworld"; /* Invalid UTF-8 */
result = input9.grep("world", "o");
("Input: " + input9 + "\n").echo();
("Pattern: world, Options: o\n").echo();
("Result: " + result.str() + "\n").echo();
("Expected: Graceful handling of invalid UTF-8\n").echo();
("Status: " + (result == "$ERR" || result.len() == 0 ? "PASS" : "FAIL") + "\n").echo();
"---\n".echo();

"=== SMOKE TEST COMPLETE ===\n".echo();
"Basic Unicode support validation complete.\n".echo(); 