
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://grapa-dev.github.io/grapa/docs/sys/net/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>$net - Grapa Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#net" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Grapa Documentation" class="md-header__button md-logo" aria-label="Grapa Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Grapa Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              $net
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../GETTING_STARTED/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../CLI_QUICKSTART/" class="md-tabs__link">
        
  
  
    
  
  CLI Quickstart

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../python_integration/" class="md-tabs__link">
        
  
  
    
  
  Python Quickstart

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../API_REFERENCE/" class="md-tabs__link">
        
  
  
    
  
  API Reference

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../GREP/" class="md-tabs__link">
        
  
  
    
  
  Grep Documentation

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../migrations/PYTHON_TO_GRAPA_MIGRATION/" class="md-tabs__link">
          
  
  
  Migration Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../USE_CASES/" class="md-tabs__link">
        
  
  
    
  
  Use Cases

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../EXAMPLES/" class="md-tabs__link">
        
  
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../TROUBLESHOOTING/" class="md-tabs__link">
        
  
  
    
  
  Troubleshooting

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Grapa Documentation" class="md-nav__button md-logo" aria-label="Grapa Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Grapa Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GETTING_STARTED/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CLI_QUICKSTART/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python_integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API_REFERENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GREP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grep Documentation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Migration Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Migration Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/PYTHON_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/JS_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JavaScript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/RUST_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rust
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/TYPESCRIPT_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TypeScript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/GO_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Go
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/RUBY_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ruby
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/KOTLIN_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kotlin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/SWIFT_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Swift
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../USE_CASES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use Cases
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../EXAMPLES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TROUBLESHOOTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#type" class="md-nav__link">
    <span class="md-ellipsis">
      type()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mac" class="md-nav__link">
    <span class="md-ellipsis">
      mac()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      interfaces()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecturl" class="md-nav__link">
    <span class="md-ellipsis">
      connect(url)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bindurl" class="md-nav__link">
    <span class="md-ellipsis">
      bind(url)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listennet" class="md-nav__link">
    <span class="md-ellipsis">
      listen(net)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onlistenurlmessagehandler-connecthandler-count1" class="md-nav__link">
    <span class="md-ellipsis">
      onlisten(url,messageHandler [,connectHandler [,count:1]])
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disconnect" class="md-nav__link">
    <span class="md-ellipsis">
      disconnect()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#certificatefile" class="md-nav__link">
    <span class="md-ellipsis">
      certificate([file])
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#privatefile-passop-param" class="md-nav__link">
    <span class="md-ellipsis">
      private(file [,passOp [,param]])
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trustedfile-path" class="md-nav__link">
    <span class="md-ellipsis">
      trusted(file, path)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verify" class="md-nav__link">
    <span class="md-ellipsis">
      verify()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chain" class="md-nav__link">
    <span class="md-ellipsis">
      chain()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#host" class="md-nav__link">
    <span class="md-ellipsis">
      host()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sendmessage" class="md-nav__link">
    <span class="md-ellipsis">
      send(message)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#receive" class="md-nav__link">
    <span class="md-ellipsis">
      receive()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pending" class="md-nav__link">
    <span class="md-ellipsis">
      pending()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onreceivehandler" class="md-nav__link">
    <span class="md-ellipsis">
      onreceive(handler)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#httpread" class="md-nav__link">
    <span class="md-ellipsis">
      httpread()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#httpsendmethodentityheaderbody" class="md-nav__link">
    <span class="md-ellipsis">
      httpsend(method,entity,header,body)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#httpmessageraw" class="md-nav__link">
    <span class="md-ellipsis">
      httpmessage(raw)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="net">$net</h1>
<p>/*
Thread Safety:
Grapa is fully thread safe in all supported environments (command line, Grapa shell, and Python/GrapaPy). All built-in operations—including map, filter, reduce, $thread, and $net—are safe to use concurrently. Users do not need to take any special precautions for thread safety in these environments.</p>
<p><em>Note: Only if Grapa is integrated directly into a non-thread-safe C++ host (not anticipated for normal users) would additional thread safety considerations arise.</em>
*/</p>
<p>Also see <a href="../../obj/document/">$OBJ document</a></p>
<p>Provides a socket library, cross functional with all platforms supported. </p>
<h2 id="type">type()</h2>
<p>Returns $net.</p>
<h2 id="mac">mac()</h2>
<div class="highlight"><pre><span></span><code>&gt; $net().mac()
{&quot;name&quot;:&quot;Ethernet&quot;,&quot;ip&quot;:&quot;104.0.97.19&quot;,&quot;mac&quot;:FB05B43EFC09ABC8}
</code></pre></div>
<h2 id="interfaces">interfaces()</h2>
<div class="highlight"><pre><span></span><code>&gt; $net().interfaces()
{
  {&quot;name&quot;:&quot;Ethernet&quot;,&quot;mac&quot;:&quot;FB05B43EFC09ABC8&quot;,&quot;family&quot;:&quot;IPV6&quot;,&quot;address&quot;:&quot;xxx:xxx:xxx:xxx::xxx&quot;},      
  {&quot;name&quot;:&quot;Ethernet&quot;,&quot;mac&quot;:&quot;FB05B43EFC09ABC8&quot;,&quot;family&quot;:&quot;IPV6&quot;,&quot;address&quot;:&quot;xxx:xxx:xxxx:xxx:xxxx:xxxx:xxxx:xxx&quot;}
  {&quot;name&quot;:&quot;Ethernet&quot;,&quot;mac&quot;:&quot;FB05B43EFC09ABC8&quot;,&quot;family&quot;:&quot;IPV4&quot;,&quot;address&quot;:&quot;104.0.97.19&quot;},
}
</code></pre></div>
<h2 id="connecturl">connect(url)</h2>
<div class="highlight"><pre><span></span><code>n2 = $net();
n2.connect(&#39;localhost:12345&#39;);
</code></pre></div>
<h2 id="bindurl">bind(url)</h2>
<p>Using bind/listen requires setting up at least 2 net objects. One for bind and the other for listen. See listen().
<div class="highlight"><pre><span></span><code>n1 = $net();
n1.bind(&#39;:12345&#39;);
</code></pre></div></p>
<h2 id="listennet">listen(net)</h2>
<p>Pass in a bound net object. Listen is blocking, so a $thread may be needed to manage - or separate threads if more than one listener.</p>
<p>For those familiar with using sockets in C++, the $net class is a representation of sockets, and use bind/listen in the same way.</p>
<div class="highlight"><pre><span></span><code>n1 = $net();
n1.bind(&#39;:12345&#39;);
n2 = $net();
n2.listen(&#39;@n1);
</code></pre></div>
<h2 id="onlistenurlmessagehandler-connecthandler-count1">onlisten(url,messageHandler [,connectHandler [,count:1]])</h2>
<p>Accomplishes the same as bind/listen, but handled in a background thread and much easier to setup.</p>
<p>When a connection is initiated, a new thread and new network object is created, and that new network object binds to the connect. The connectHandler is then called to provide a way to initialize data structures, and than the messageHandler is called for incoming data. The connectHandler receives 1 parameter - an updateable variable. The messageHandler recieves 2 parameters - the message and a hasmore flag. If the hasmore is 0, the data can be processed. If the message length is zero, the remote connection terminated and messageHandler should cleanup as the thread will be closing. </p>
<p>The count defines the number of listeners - but fixed to 1 for now. Once a connection is established, the listener automatically restarts. For reasonable workloads, the 1 should be sufficient. For now if more is needed, use Bind/Listen - this though with require the use of $thread. </p>
<p>The following sets up a simple web service. Use postman to post messages to verify.</p>
<div class="highlight"><pre><span></span><code>processPost = op(in)
{
    {processed:in};
}

postHandler = op(in) 
{
    $local.data = in.split(&quot;\r&quot;).join(&quot;&quot;);
    $local.len = data.len() - data.split(&quot;\n\n&quot;)[0].len() - 2;
    if (len&lt;0) len=0;
    $local.body = data.right(len);
    $local.rstr = processPost(body).str();
    &quot;HTTP/1.1 200 OK\r\nContent-Type: text/json\r\nContent-Length: &quot;+rstr.len().str()+&quot;\r\n\r\n&quot;+rstr;
};

postConnectHandler = op(netSession)
{
    netSession.data = &quot;&quot;;
};

postMessageHandler = op(netSession,message,hasmore)
{
    netSession.data += message;
    if (hasmore==0)
    {
        netSession.send(postHandler(netSession.data));
        netSession.data = &quot;&quot;;
    };
};

n=$net();
n.onlisten(&#39;:12345&#39;,postMessageHandler,postConnectHandler);
</code></pre></div>
<p>To very, try the following.
<div class="highlight"><pre><span></span><code>n2 = $net();
err = n2.connect(&#39;localhost:12345&#39;);
err = n2.send(&#39;POST / HTTP/1.1\r\nContent-Type: application/json\r\n\r\n{try:55}&#39;);
n2.nreceive();
n2.receive();
n2.disconnect();
</code></pre></div></p>
<h2 id="disconnect">disconnect()</h2>
<p>Disconnects the session. Disconnecting a listener will disconnect all sessions the listener is a parent of.</p>
<h2 id="certificatefile">certificate([file])</h2>
<p>Sets $net instance to SSL mode with certificate file.</p>
<p>Use certificate() to revert back to non-SSL.</p>
<p>See SSL_CTX_use_certificate_chain_file.</p>
<h2 id="privatefile-passop-param">private(file [,passOp [,param]])</h2>
<p>Server in SSL mode requires a private key file. </p>
<p>If the private key file is password protected, also provide an $OP for the SSL routines to request the password. If a param is added, the callback will include the param. </p>
<p>See SSL_CTX_use_PrivateKey_file.</p>
<h2 id="trustedfile-path">trusted(file, path)</h2>
<p>See SSL_CTX_load_verify_locations.</p>
<h2 id="verify">verify()</h2>
<p>Call after connecting with SSL.</p>
<p>Returns a list:
    result
    certificate</p>
<p>See the following for result codes:
https://www.openssl.org/docs/man1.0.2/man1/verify.html</p>
<p>Use decode("PEM") to decode the certificate.
<div class="highlight"><pre><span></span><code>&gt; x = n2.verify();
&gt; x.certificate.decode(&quot;PEM&quot;);
</code></pre></div></p>
<h2 id="chain">chain()</h2>
<p>Certificate chain.</p>
<p>Use decode(PEM) to decode.
<div class="highlight"><pre><span></span><code>&gt; x = n2.chain();
&gt; x[0].decode(&quot;PEM&quot;);
</code></pre></div></p>
<h2 id="host">host()</h2>
<p>After running the sample in onlisten, try the following.
<div class="highlight"><pre><span></span><code>n.host();
{&quot;url&quot;:&quot;:12345&quot;,&quot;host&quot;:&quot;computer name&quot;,&quot;ip&quot;:&quot;XX.XX.XX.XX&quot;,&quot;port&quot;:12345,&quot;family&quot;:2,&quot;connected&quot;:0,&quot;bound&quot;:1}
</code></pre></div></p>
<h2 id="sendmessage">send(message)</h2>
<p>See example in onlisten.</p>
<p>NOTE: If using SSL and the remote system breaks the connection, first send will return no error. The second send will return an error. This is not the case for read - where the first read after a broken connection will return an error and close the connection.</p>
<h2 id="receive">receive()</h2>
<p>Blocks until data is received. Use nreceive() first to verify data exists. Or use onreceive.</p>
<p>See example in onlisten.</p>
<h2 id="pending">pending()</h2>
<p>Number of bytes that can be received.</p>
<p>If an SSL connection, the byte count will be what is pending in the SSL encrypted buffer, which is different than the unencrypted data. </p>
<p>See example in onlisten.</p>
<h2 id="onreceivehandler">onreceive(handler)</h2>
<p>Handler will be called when data is received.</p>
<div class="highlight"><pre><span></span><code>receiveHandler = op(netSession,message,hasmore)
{
    netSession.data += message;
    if (hasmore==0)
    {
        (netSession.data+&quot;\n&quot;).echo();
        (@&lt;prompt&gt;)();
        netSession.data = &quot;&quot;;
    };
};

n2 = $net();
n2.connect(&#39;localhost:12345&#39;);
n2.onreceive(receiveHandler);
n2.send(&#39;POST / HTTP/1.1\r\nContent-Type: application/json\r\n\r\n{try:55}&#39;);
n2.send(&#39;POST / HTTP/1.1\r\nContent-Type: application/json\r\n\r\n{try:400}&#39;);
n2.disconnect();
</code></pre></div>
<h2 id="httpread">httpread()</h2>
<h2 id="httpsendmethodentityheaderbody">httpsend(method,entity,header,body)</h2>
<h2 id="httpmessageraw">httpmessage(raw)</h2>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.action.edit", "content.action.view", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>