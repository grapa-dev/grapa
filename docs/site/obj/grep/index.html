
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://grapa-dev.github.io/grapa/docs/obj/grep/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Unicode Grep Documentation - Grapa Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#unicode-grep-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Grapa Documentation" class="md-header__button md-logo" aria-label="Grapa Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Grapa Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Unicode Grep Documentation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../GETTING_STARTED/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../CLI_QUICKSTART/" class="md-tabs__link">
        
  
  
    
  
  CLI Quickstart

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../python_integration/" class="md-tabs__link">
        
  
  
    
  
  Python Quickstart

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../API_REFERENCE/" class="md-tabs__link">
        
  
  
    
  
  API Reference

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../GREP/" class="md-tabs__link">
        
  
  
    
  
  Grep Documentation

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../migrations/PYTHON_TO_GRAPA_MIGRATION/" class="md-tabs__link">
          
  
  
  Migration Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../use_cases/" class="md-tabs__link">
          
  
  
  Use Cases

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../EXAMPLES/" class="md-tabs__link">
        
  
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../syntax/basic_syntax/" class="md-tabs__link">
          
  
  
  Syntax

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../TROUBLESHOOTING/" class="md-tabs__link">
        
  
  
    
  
  Troubleshooting

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Grapa Documentation" class="md-nav__button md-logo" aria-label="Grapa Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Grapa Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GETTING_STARTED/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CLI_QUICKSTART/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python_integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API_REFERENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GREP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grep Documentation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Migration Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Migration Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/PYTHON_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/JS_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JavaScript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/RUST_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rust
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/TYPESCRIPT_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TypeScript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/GO_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Go
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/RUBY_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ruby
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/KOTLIN_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kotlin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/SWIFT_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Swift
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Use Cases
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Use Cases
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../use_cases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../use_cases/etl_data_engineering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ETL / Data Engineering
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../use_cases/compiler_bnf_learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compiler/BNF Learning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../use_cases/high_precision_math/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    High-Precision Math
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../use_cases/parallel_concurrent_programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parallel Programming
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../use_cases/web_data_scraping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web Scraping
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../use_cases/database_file_system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database & File System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../use_cases/education_prototyping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Education & Prototyping
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../use_cases/cryptography/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cryptography
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../EXAMPLES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Syntax
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Syntax
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/basic_syntax/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Syntax
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/operator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/precedence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Precedence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/grammar_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grammar Design
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TROUBLESHOOTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-formatting-and-array-design" class="md-nav__link">
    <span class="md-ellipsis">
      Output Formatting and Array Design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output Formatting and Array Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-arrays-instead-of-strings" class="md-nav__link">
    <span class="md-ellipsis">
      Why Arrays Instead of Strings?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delimiter-removal-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Delimiter Removal Behavior
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#console-output-equivalence" class="md-nav__link">
    <span class="md-ellipsis">
      Console Output Equivalence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benefits-of-array-design" class="md-nav__link">
    <span class="md-ellipsis">
      Benefits of Array Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-delimiter-support" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Delimiter Support
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      Key Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unicode-support" class="md-nav__link">
    <span class="md-ellipsis">
      🔍 Unicode Support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-regex-features" class="md-nav__link">
    <span class="md-ellipsis">
      🎯 Advanced Regex Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-formats" class="md-nav__link">
    <span class="md-ellipsis">
      📊 Output Formats
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Syntax
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Usage Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#options-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Options Reference
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Options Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-options" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diacritic-insensitive-matching-d-option" class="md-nav__link">
    <span class="md-ellipsis">
      Diacritic-Insensitive Matching (d option)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Diacritic-Insensitive Matching (d option)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#special-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Special Capabilities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    <span class="md-ellipsis">
      Limitations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-options" class="md-nav__link">
    <span class="md-ellipsis">
      Output Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-options" class="md-nav__link">
    <span class="md-ellipsis">
      Context Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processing-options" class="md-nav__link">
    <span class="md-ellipsis">
      Processing Options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Parameters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Additional Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unicode-normalization" class="md-nav__link">
    <span class="md-ellipsis">
      Unicode Normalization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processing-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Processing Mode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unicode-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Unicode Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#raw-string-literals" class="md-nav__link">
    <span class="md-ellipsis">
      Raw String Literals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-output-format" class="md-nav__link">
    <span class="md-ellipsis">
      JSON Output Format
    </span>
  </a>
  
    <nav class="md-nav" aria-label="JSON Output Format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-object-structure" class="md-nav__link">
    <span class="md-ellipsis">
      JSON Object Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_1" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-named-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing Named Groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    <span class="md-ellipsis">
      Notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#named-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Named Groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-lines" class="md-nav__link">
    <span class="md-ellipsis">
      Context Lines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-separators" class="md-nav__link">
    <span class="md-ellipsis">
      Context Separators
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-regex-features_1" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Regex Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-output-examples" class="md-nav__link">
    <span class="md-ellipsis">
      JSON Output Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-parameters-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Parameters Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-features" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#caching" class="md-nav__link">
    <span class="md-ellipsis">
      Caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimization" class="md-nav__link">
    <span class="md-ellipsis">
      Optimization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-optimization-details" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Optimization Details
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Parallel Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-mode-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Binary Mode Processing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Binary Mode Processing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-to-use-binary-mode" class="md-nav__link">
    <span class="md-ellipsis">
      When to Use Binary Mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-vs-unicode-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Binary vs Unicode Mode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-usage-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Usage Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complex-context-line-combinations" class="md-nav__link">
    <span class="md-ellipsis">
      Complex Context Line Combinations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-tuning-for-large-datasets" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Tuning for Large Datasets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-safety" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Safety
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-regex-compilation-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Common Regex Compilation Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unicode-normalization-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Unicode Normalization Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging Tips
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-and-verification" class="md-nav__link">
    <span class="md-ellipsis">
      Testing and Verification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing and Verification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#performance-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Testing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capability-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Capability Testing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-specific-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Feature-Specific Tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regression-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Regression Testing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zero-length-match-and-empty-string-output" class="md-nav__link">
    <span class="md-ellipsis">
      Zero-Length Match and Empty String Output
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Zero-Length Match and Empty String Output">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-zero-length-match" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Zero-Length Match
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-array-literal-with-empty-string" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Array Literal with Empty String
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-formatting-and-array-design_1" class="md-nav__link">
    <span class="md-ellipsis">
      Output Formatting and Array Design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output Formatting and Array Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-arrays-instead-of-strings_1" class="md-nav__link">
    <span class="md-ellipsis">
      Why Arrays Instead of Strings?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delimiter-removal-behavior_1" class="md-nav__link">
    <span class="md-ellipsis">
      Delimiter Removal Behavior
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#console-output-equivalence_1" class="md-nav__link">
    <span class="md-ellipsis">
      Console Output Equivalence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benefits-of-array-design_1" class="md-nav__link">
    <span class="md-ellipsis">
      Benefits of Array Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-delimiter-support_1" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Delimiter Support
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-output" class="md-nav__link">
    <span class="md-ellipsis">
      Error Output
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-coverage-and-regression-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Test Coverage and Regression Testing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprehensive-features-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Comprehensive Features Summary
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Comprehensive Features Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fully-supported-features" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ Fully Supported Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not-supported-3-specialized-features" class="md-nav__link">
    <span class="md-ellipsis">
      ❌ Not Supported (3 specialized features):
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features-not-currently-supported" class="md-nav__link">
    <span class="md-ellipsis">
      Features Not Currently Supported
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Features Not Currently Supported">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#search-strategy-features" class="md-nav__link">
    <span class="md-ellipsis">
      Search Strategy Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-handling-features-handled-by-grapa-language-or-python-integration" class="md-nav__link">
    <span class="md-ellipsis">
      File Handling Features (handled by Grapa language or Python integration)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-actual-missing-features-excluding-file-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Summary: Actual Missing Features (Excluding File Handling)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Summary: Actual Missing Features (Excluding File Handling)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#performance-features-1-missing" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Features (1 missing)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#achieving-missing-features-in-grapa" class="md-nav__link">
    <span class="md-ellipsis">
      Achieving "Missing" Features in Grapa
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Achieving &#34;Missing&#34; Features in Grapa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case-insensitive-matching" class="md-nav__link">
    <span class="md-ellipsis">
      Case-Insensitive Matching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#word-boundary-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Word Boundary Mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#column-numbers" class="md-nav__link">
    <span class="md-ellipsis">
      Column Numbers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grapa-vs-ripgrep-feature-comparison-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Grapa vs. ripgrep: Feature Comparison Summary
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Grapa vs. ripgrep: Feature Comparison Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grapas-strengths-where-grapa-excels" class="md-nav__link">
    <span class="md-ellipsis">
      Grapa's Strengths (Where Grapa excels)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ripgreps-strengths-where-ripgrep-excels" class="md-nav__link">
    <span class="md-ellipsis">
      ripgrep's Strengths (Where ripgrep excels)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shared-strengths-both-tools-excel" class="md-nav__link">
    <span class="md-ellipsis">
      Shared Strengths (Both tools excel)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-coverage-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Coverage Comparison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-use-each-tool" class="md-nav__link">
    <span class="md-ellipsis">
      When to Use Each Tool
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grapas-integrated-approach-vs-ripgreps-standalone-approach" class="md-nav__link">
    <span class="md-ellipsis">
      Grapa's Integrated Approach vs. ripgrep's Standalone Approach
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Grapa&#39;s Integrated Approach vs. ripgrep&#39;s Standalone Approach">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-handling-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      File Handling Philosophy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-file-processing-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Example: File Processing Workflow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feature-status" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Status
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Feature Status">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fully-implemented-features" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ Fully Implemented Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#known-limitations" class="md-nav__link">
    <span class="md-ellipsis">
      ⚠️ Known Limitations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ripgrep-parity-status" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ Ripgrep Parity Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recent-fixes-and-improvements-2024-12" class="md-nav__link">
    <span class="md-ellipsis">
      Recent Fixes and Improvements (2024-12)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comprehensive-testing-for-multiline-patterns-and-rare-pcre2-features-2024-12" class="md-nav__link">
    <span class="md-ellipsis">
      Comprehensive Testing for Multiline Patterns and Rare PCRE2 Features (2024-12)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#current-status-and-known-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Current Status and Known Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-context-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Context Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-unicode-o-option-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Unicode "o" Option Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="unicode-grep-documentation">Unicode Grep Documentation</h1>
<p><strong>See Also:</strong> <a href="../PYTHON_INTEGRATION.md">Python Integration Guide</a> for Python grep examples</p>
<h2 id="overview">Overview</h2>
<p>The Unicode grep functionality in Grapa provides advanced text searching capabilities with full Unicode support, PCRE2-powered regular expressions, and comprehensive output options. It's designed to handle international text, emoji, and complex Unicode properties while maintaining high performance.</p>
<h2 id="output-formatting-and-array-design">Output Formatting and Array Design</h2>
<h3 id="why-arrays-instead-of-strings">Why Arrays Instead of Strings?</h3>
<p>Grapa grep is designed as an <strong>integrated programming language feature</strong>, not a standalone console tool. This fundamental difference explains the output format:</p>
<p><strong>Grapa Grep (Integrated Language):</strong>
- Returns <strong>arrays of strings</strong> for programmatic use
- <strong>Removes delimiters</strong> from output strings (clean data for processing)
- Designed for scripting and data manipulation
- Example: <code>["line1", "line2", "line3"]</code> (no <code>\n</code> in strings)</p>
<p><strong>ripgrep/GNU grep (Console Tools):</strong>
- Outputs <strong>single string</strong> with embedded delimiters
- <strong>Preserves delimiters</strong> in output for console display
- Designed for command-line text processing
- Example: <code>"line1\nline2\nline3\n"</code> (with <code>\n</code> in string)</p>
<h3 id="delimiter-removal-behavior">Delimiter Removal Behavior</h3>
<p>Grapa grep <strong>automatically removes delimiters</strong> from output strings:</p>
<div class="highlight"><pre><span></span><code>/* Input with custom delimiter */
input = &quot;line1|||line2|||line3&quot;;

/* Grapa grep removes delimiters from output */
result = input.grep(&quot;line&quot;, &quot;o&quot;, &quot;|||&quot;);
/* Result: [&quot;line1&quot;, &quot;line2&quot;, &quot;line3&quot;] (clean strings, no |||) */

/* For console output, you can join with delimiter */
console_output = result.join(&quot;|||&quot;);
/* Result: &quot;line1|||line2|||line3&quot; */
</code></pre></div>
<h3 id="console-output-equivalence">Console Output Equivalence</h3>
<p>To get console-equivalent output in Grapa:</p>
<div class="highlight"><pre><span></span><code>/* Grapa approach */
input = &quot;line1\nline2\nline3&quot;;
result = input.grep(&quot;line&quot;, &quot;o&quot;);  /* [&quot;line1&quot;, &quot;line2&quot;, &quot;line3&quot;] */
console_output = result.join(&quot;\n&quot;);  /* &quot;line1\nline2\nline3&quot; */

/* This matches ripgrep output: &quot;line1\nline2\nline3&quot; */
</code></pre></div>
<h3 id="benefits-of-array-design">Benefits of Array Design</h3>
<ol>
<li><strong>Programmatic Use</strong>: Arrays are easier to process in scripts</li>
<li><strong>Clean Data</strong>: No delimiter artifacts in output strings</li>
<li><strong>Flexible Output</strong>: Can join with any delimiter for different formats</li>
<li><strong>Language Integration</strong>: Natural fit with Grapa's array-based design</li>
<li><strong>Python Integration</strong>: Arrays map naturally to Python lists</li>
</ol>
<h3 id="custom-delimiter-support">Custom Delimiter Support</h3>
<p>Grapa grep fully supports <strong>multi-character delimiters</strong>:</p>
<div class="highlight"><pre><span></span><code>/* Single character delimiter */
&quot;line1|line2|line3&quot;.grep(&quot;line&quot;, &quot;o&quot;, &quot;|&quot;)
/* Result: [&quot;line1&quot;, &quot;line2&quot;, &quot;line3&quot;] */

/* Multi-character delimiter */
&quot;line1|||line2|||line3&quot;.grep(&quot;line&quot;, &quot;o&quot;, &quot;|||&quot;)
/* Result: [&quot;line1&quot;, &quot;line2&quot;, &quot;line3&quot;] */

/* Complex delimiter */
&quot;line1&lt;DELIM&gt;line2&lt;DELIM&gt;line3&quot;.grep(&quot;line&quot;, &quot;o&quot;, &quot;&lt;DELIM&gt;&quot;)
/* Result: [&quot;line1&quot;, &quot;line2&quot;, &quot;line3&quot;] */
</code></pre></div>
<p><strong>Note</strong>: All delimiters are automatically removed from output strings, regardless of length or complexity.</p>
<h2 id="key-features">Key Features</h2>
<h3 id="unicode-support">🔍 <strong>Unicode Support</strong></h3>
<ul>
<li>Full Unicode character handling (Cyrillic, Chinese, Japanese, Korean, Arabic, Hebrew, Thai, etc.)</li>
<li>Unicode normalization (NFC, NFD, NFKC, NFKD)</li>
<li><strong>Advanced Unicode properties</strong> (<code>\p{L}</code>, <code>\p{N}</code>, <code>\p{Emoji}</code>, <code>\p{So}</code>, etc.)</li>
<li><strong>Unicode grapheme clusters</strong> (<code>\X</code>)</li>
<li>Case-insensitive matching with proper Unicode case folding</li>
</ul>
<h3 id="advanced-regex-features">🎯 <strong>Advanced Regex Features</strong></h3>
<ul>
<li>PCRE2-powered regular expressions</li>
<li>Named groups (<code>(?P&lt;name&gt;...)</code>)</li>
<li>Unicode properties and script extensions</li>
<li>Atomic groups (<code>(?&gt;...)</code>)</li>
<li><strong>Lookaround assertions</strong> (<code>(?=...)</code>, <code>(?&lt;=...)</code>, <code>(?!...)</code>, <code>(?&lt;!...)</code>)</li>
<li><strong>Possessive quantifiers</strong> (<code>*+</code>, <code>++</code>, <code>?+</code>, <code>{n,m}+</code>)</li>
<li><strong>Conditional patterns</strong> (<code>?(condition)...</code>)</li>
<li>Unicode categories (<code>\p{L}</code>, <code>\p{N}</code>, <code>\p{Z}</code>, <code>\p{P}</code>, <code>\p{S}</code>, <code>\p{C}</code>, <code>\p{M}</code>)</li>
<li>Unicode scripts (<code>\p{sc=Latin}</code>, <code>\p{sc=Han}</code>, etc.)</li>
<li>Unicode script extensions (<code>\p{scx:Han}</code>, etc.)</li>
<li>Unicode general categories (<code>\p{Lu}</code>, <code>\p{Ll}</code>, etc.)</li>
</ul>
<h3 id="output-formats">📊 <strong>Output Formats</strong></h3>
<ul>
<li>Standard text output</li>
<li>JSON output with named groups, offsets, and line numbers</li>
<li><strong>Context lines</strong> (before/after matches)</li>
<li>Line numbers and byte offsets</li>
<li>Match-only or full-line output</li>
</ul>
<h2 id="syntax">Syntax</h2>
<div class="highlight"><pre><span></span><code>string.grep(pattern, options, delimiter, normalization, mode, num_workers)
</code></pre></div>
<h3 id="parameters">Parameters</h3>
<p><strong>Required Parameters:</strong>
- <strong>string</strong>: The input text to search
- <strong>pattern</strong>: PCRE2 regular expression pattern with Unicode support</p>
<p><strong>Optional Parameters (all have sensible defaults):</strong>
- <strong>options</strong>: String containing option flags (default: <code>""</code> - no options)
- <strong>delimiter</strong>: Custom line delimiter (default: <code>"\n"</code>)
- <strong>normalization</strong>: Unicode normalization form: <code>"NONE"</code>, <code>"NFC"</code>, <code>"NFD"</code>, <code>"NFKC"</code>, <code>"NFKD"</code> (default: <code>"NONE"</code>)
- <strong>mode</strong>: Processing mode: <code>"UNICODE"</code> for full Unicode processing, <code>"BINARY"</code> for raw byte processing (default: <code>"UNICODE"</code>)
- <strong>num_workers</strong>: Number of worker threads for parallel processing: <code>0</code> for auto-detection, <code>1</code> for sequential, <code>2+</code> for parallel (default: <code>0</code> - auto-detection)</p>
<h3 id="simple-usage-examples">Simple Usage Examples</h3>
<div class="highlight"><pre><span></span><code>/* Minimal usage - only required parameters */
&quot;Hello world&quot;.grep(&quot;world&quot;);
/* Result: [&quot;Hello world&quot;] */

/* With options */
&quot;Hello world&quot;.grep(&quot;world&quot;, &quot;i&quot;);
/* Result: [&quot;Hello world&quot;] */

/* With parallel processing (auto-detection) */
&quot;Hello world&quot;.grep(&quot;world&quot;, &quot;i&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, 0);
/* Result: [&quot;Hello world&quot;] - Uses optimal number of threads */

/* Manual parallel processing */
&quot;Hello world&quot;.grep(&quot;world&quot;, &quot;i&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, 4);
/* Result: [&quot;Hello world&quot;] - Uses 4 worker threads */

/* All parameters (rarely needed) */
&quot;Hello world&quot;.grep(&quot;world&quot;, &quot;i&quot;, &quot;\n&quot;, &quot;NONE&quot;, &quot;UNICODE&quot;, 2);
/* Result: [&quot;Hello world&quot;] */
</code></pre></div>
<h2 id="options-reference">Options Reference</h2>
<h3 id="basic-options">Basic Options</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>a</code></td>
<td>All-mode (match across full input string, context options ignored)</td>
<td><code>"text".grep("pattern", "a")</code></td>
</tr>
<tr>
<td><code>i</code></td>
<td>Case-insensitive matching</td>
<td><code>"Text".grep("text", "i")</code></td>
</tr>
<tr>
<td><code>v</code></td>
<td>Invert match (return lines that do NOT match the pattern)</td>
<td><code>"text".grep("pattern", "v")</code></td>
</tr>
<tr>
<td><code>x</code></td>
<td>Exact line match (whole line must match)</td>
<td><code>"text".grep("^text$", "x")</code></td>
</tr>
<tr>
<td><code>N</code></td>
<td>Normalize input and pattern to NFC</td>
<td><code>"café".grep("cafe", "N")</code></td>
</tr>
<tr>
<td><code>d</code></td>
<td>Diacritic-insensitive matching (strip accents/diacritics from both input and pattern, robust Unicode-aware)</td>
<td><code>"café".grep("cafe", "d")</code></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="diacritic-insensitive-matching-d-option">Diacritic-Insensitive Matching (<code>d</code> option)</h3>
<p>The <code>d</code> option enables <strong>diacritic-insensitive matching</strong>. When enabled, both the input and the pattern are:
1. <strong>Unicode normalized</strong> (NFC by default, or as specified)
2. <strong>Case folded</strong> (Unicode-aware, not just ASCII)
3. <strong>Diacritics/accents are stripped</strong> (works for Latin, Greek, Cyrillic, Turkish, Vietnamese, and more)</p>
<p>This allows matches like:
- <code>"café".grep("cafe", "d")</code> → <code>["café"]</code>
- <code>"CAFÉ".grep("cafe", "di")</code> → <code>["CAFÉ"]</code>
- <code>"mañana".grep("manana", "d")</code> → <code>["mañana"]</code>
- <code>"İstanbul".grep("istanbul", "di")</code> → <code>["İstanbul"]</code>
- <code>"καφές".grep("καφες", "d")</code> → <code>["καφές"]</code>
- <code>"кофе".grep("кофе", "di")</code> → <code>["кофе"]</code></p>
<h4 id="special-capabilities">Special Capabilities</h4>
<ul>
<li>Handles both precomposed (NFC) and decomposed (NFD) Unicode forms</li>
<li>Supports diacritic-insensitive matching for Latin, Greek, Cyrillic, Turkish, Vietnamese, and more</li>
<li>Works with case-insensitive (<code>i</code>) and normalization (<code>N</code>, or normalization parameter) options</li>
<li>Robust for international text, including combining marks</li>
</ul>
<h4 id="limitations">Limitations</h4>
<ul>
<li>Only covers scripts and diacritics explicitly mapped (Latin, Greek, Cyrillic, Turkish, Vietnamese, etc.)</li>
<li>Does <strong>not</strong> transliterate between scripts (e.g., Greek to Latin)</li>
<li>Does <strong>not</strong> remove all possible Unicode marks outside supported ranges (e.g., rare/archaic scripts)</li>
<li>For full Unicode normalization, use with the normalization parameter (e.g., <code>"NFC"</code>, <code>"NFD"</code>)</li>
<li>Does <strong>not</strong> perform locale-specific collation (e.g., German ß vs ss)</li>
</ul>
<h4 id="example">Example</h4>
<div class="highlight"><pre><span></span><code>input = &quot;café\nCAFÉ\ncafe\u0301\nCafe\nCAFÉ\nmañana\nmañana\nİstanbul\nistanbul\nISTANBUL\nstraße\nSTRASSE\nStraße\nкофе\nКофе\nκαφές\nΚαφές\n&quot;;
result = input.grep(r&quot;cafe&quot;, &quot;di&quot;);
/* Result: [&quot;café&quot;, &quot;CAFÉ&quot;, &quot;café&quot;, &quot;Cafe&quot;, &quot;CAFÉ&quot;] */
</code></pre></div>
<h3 id="output-options">Output Options</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>o</code></td>
<td>Match-only (output only matched text)</td>
<td><code>"Hello world".grep("\\w+", "o")</code></td>
</tr>
<tr>
<td><code>n</code></td>
<td>Prefix matches with line numbers</td>
<td><code>"text".grep("pattern", "n")</code></td>
</tr>
<tr>
<td><code>l</code></td>
<td>Line number only output</td>
<td><code>"text".grep("pattern", "l")</code></td>
</tr>
<tr>
<td><code>b</code></td>
<td>Output byte offset with matches</td>
<td><code>"text".grep("pattern", "b")</code></td>
</tr>
<tr>
<td><code>j</code></td>
<td>JSON output format with named groups, offsets, and line numbers</td>
<td><code>"text".grep("pattern", "oj")</code></td>
</tr>
</tbody>
</table>
<h3 id="context-options">Context Options</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A&lt;n&gt;</code></td>
<td>Show n lines after match</td>
<td><code>"text".grep("pattern", "A2")</code></td>
</tr>
<tr>
<td><code>B&lt;n&gt;</code></td>
<td>Show n lines before match</td>
<td><code>"text".grep("pattern", "B1")</code></td>
</tr>
<tr>
<td><code>C&lt;n&gt;</code></td>
<td>Show n lines before and after</td>
<td><code>"text".grep("pattern", "C3")</code></td>
</tr>
<tr>
<td><code>A&lt;n&gt;B&lt;m&gt;</code></td>
<td>Show n lines after and m lines before</td>
<td><code>"text".grep("pattern", "A2B1")</code></td>
</tr>
<tr>
<td><code>B&lt;m&gt;C&lt;n&gt;</code></td>
<td>Show m lines before and n lines before/after</td>
<td><code>"text".grep("pattern", "B1C2")</code></td>
</tr>
</tbody>
</table>
<p><strong>Note</strong>: Context options can be combined flexibly. For example, <code>"A2B1C3"</code> would show 2 lines after, 1 line before, and 3 lines before/after the match. Overlapping context lines are allowed (like ripgrep behavior) to ensure all relevant context is shown.</p>
<h3 id="processing-options">Processing Options</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>c</code></td>
<td>Count of matches</td>
<td><code>"text".grep("pattern", "c")</code></td>
</tr>
<tr>
<td><code>d</code></td>
<td>Deduplicate results</td>
<td><code>"text".grep("pattern", "d")</code></td>
</tr>
<tr>
<td><code>g</code></td>
<td>Group results per line</td>
<td><code>"text".grep("pattern", "g")</code></td>
</tr>
</tbody>
</table>
<p><strong>Important: Count-Only Behavior</strong>
- The count-only option (<code>c</code>) returns the count as a <strong>single item in an array</strong>, not as a number
- Example: <code>"Hello world\nGoodbye world".grep("Hello", "c")</code> returns <code>["2"]</code> not <code>2</code>
- To get the count as a number: <code>"Hello world\nGoodbye world".grep("Hello", "c")[0].int()</code>
- This design maintains consistency with Grapa's array-based return values</p>
<h2 id="additional-parameters">Additional Parameters</h2>
<h3 id="unicode-normalization">Unicode Normalization</h3>
<p>The <code>normalization</code> parameter controls Unicode normalization:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>"NONE"</code></td>
<td>No normalization (default)</td>
<td>Standard text processing</td>
</tr>
<tr>
<td><code>"NFC"</code></td>
<td>Normalization Form Canonical Composition</td>
<td>Most common for text storage</td>
</tr>
<tr>
<td><code>"NFD"</code></td>
<td>Normalization Form Canonical Decomposition</td>
<td>Unicode analysis</td>
</tr>
<tr>
<td><code>"NFKC"</code></td>
<td>Normalization Form Compatibility Composition</td>
<td>Search and matching</td>
</tr>
<tr>
<td><code>"NFKD"</code></td>
<td>Normalization Form Compatibility Decomposition</td>
<td>Compatibility processing</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note:</strong> Unicode normalization (N, or normalization parameter) does <strong>not</strong> remove diacritics or accents. It only canonicalizes Unicode forms. To match characters with and without accents (e.g., <code>cafe</code> vs <code>café</code>), you must use the <code>d</code> option for diacritic-insensitive matching.</p>
</blockquote>
<h3 id="processing-mode">Processing Mode</h3>
<p>The <code>mode</code> parameter controls how the input is processed:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>"UNICODE"</code></td>
<td>Full Unicode processing (default)</td>
<td>Text files, user input</td>
</tr>
<tr>
<td><code>"BINARY"</code></td>
<td>Raw byte processing</td>
<td>Binary files, network data</td>
</tr>
</tbody>
</table>
<h2 id="examples">Examples</h2>
<h3 id="basic-usage">Basic Usage</h3>
<div class="highlight"><pre><span></span><code>/* Simple pattern matching */
&quot;Hello world&quot;.grep(&quot;world&quot;);
/* Result: [&quot;Hello world&quot;] */

/* Case-insensitive matching */
&quot;Hello WORLD&quot;.grep(&quot;world&quot;, &quot;i&quot;);
/* Result: [&quot;Hello WORLD&quot;] */

/* Match-only output */
&quot;Hello world&quot;.grep(&quot;\\w+&quot;, &quot;o&quot;);
/* Result: [&quot;Hello&quot;, &quot;world&quot;] */

/* Raw string literals for better readability */
&quot;Hello world&quot;.grep(r&quot;\w+&quot;, &quot;o&quot;);
/* Result: [&quot;Hello&quot;, &quot;world&quot;] - No need to escape backslashes */

/* Complex patterns with raw strings */
&quot;file.txt&quot;.grep(r&quot;^[a-zA-Z0-9_]+\.txt$&quot;, &quot;x&quot;);
/* Result: [&quot;file.txt&quot;] - Much more readable than &quot;\\^[a-zA-Z0-9_]\\+\\.txt\\$&quot; */

/* Raw strings preserve literal escape sequences */
&quot;\\x45&quot;.grep(r&quot;\x45&quot;, &quot;o&quot;);
/* Result: [&quot;\\x45&quot;] - Literal string, not character &quot;E&quot; */
</code></pre></div>
<h3 id="unicode-examples">Unicode Examples</h3>
<div class="highlight"><pre><span></span><code>/* Unicode characters */
&quot;Привет мир&quot;.grep(&quot;мир&quot;);
/* Result: [&quot;Привет мир&quot;] */

/* Unicode properties */
&quot;Hello 世界 123 €&quot;.grep(&quot;\\p{L}+&quot;, &quot;o&quot;);
/* Result: [&quot;Hello&quot;, &quot;世界&quot;] */

/* Emoji handling */
&quot;Hello 👋 world 🌍&quot;.grep(&quot;(?:\\p{So}(?:\\u200D\\p{So})*)+&quot;, &quot;o&quot;);
/* Result: [&quot;👋&quot;, &quot;🌍&quot;] */

/* Emoji sequence (family) */
&quot;Family: 👨‍👩‍👧‍👦&quot;.grep(&quot;(?:\\p{So}(?:\\u200D\\p{So})*)+&quot;, &quot;o&quot;);
/* Result: [&quot;👨‍👩‍👧‍👦&quot;] */

/* Unicode grapheme clusters */
&quot;Hello 👋 world 🌍&quot;.grep(&quot;\\X&quot;, &quot;o&quot;);
/* Result: [&quot;H&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;, &quot; &quot;, &quot;👋&quot;, &quot; &quot;, &quot;w&quot;, &quot;o&quot;, &quot;r&quot;, &quot;l&quot;, &quot;d&quot;, &quot; &quot;, &quot;🌍&quot;] */

/* Emoji sequences as grapheme clusters */
&quot;👨‍👩‍👧‍👦&quot;.grep(&quot;\\X&quot;, &quot;o&quot;);
/* Result: [&quot;👨‍👩‍👧‍👦&quot;] (entire family emoji as one grapheme cluster) */

/* Combining characters as grapheme clusters */
&quot;café mañana&quot;.grep(&quot;\\X&quot;, &quot;o&quot;);
/* Result: [&quot;c&quot;, &quot;a&quot;, &quot;f&quot;, &quot;é&quot;, &quot; &quot;, &quot;m&quot;, &quot;a&quot;, &quot;ñ&quot;, &quot;a&quot;, &quot;n&quot;, &quot;a&quot;] (é and ñ as single grapheme clusters) */

/* Unicode normalization */
&quot;café&quot;.grep(&quot;cafe&quot;, &quot;N&quot;);
/* Result: [&quot;café&quot;] */
</code></pre></div>
<h3 id="raw-string-literals">Raw String Literals</h3>
<p>For better readability of regex patterns, you can use raw string literals by prefixing the string with <code>r</code>. This prevents escape sequence processing, making patterns much more readable:</p>
<div class="highlight"><pre><span></span><code>/* Without raw string (requires escaping) */
&quot;file.txt&quot;.grep(&quot;^[a-zA-Z0-9_]+\\.txt$&quot;, &quot;x&quot;)
/* Result: [&quot;file.txt&quot;] */

/* With raw string (no escaping needed) */
&quot;file.txt&quot;.grep(r&quot;^[a-zA-Z0-9_]+\.txt$&quot;, &quot;x&quot;)
/* Result: [&quot;file.txt&quot;] - Much cleaner! */

/* Complex patterns benefit greatly */
&quot;user@domain.com&quot;.grep(r&quot;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$&quot;, &quot;x&quot;)
/* Result: [&quot;user@domain.com&quot;] */

/* Named groups with raw strings */
&quot;John Doe (30)&quot;.grep(r&quot;(?P&lt;first&gt;\\w+) (?P&lt;last&gt;\\w+) \((?P&lt;age&gt;\\d+)\)&quot;, &quot;oj&quot;)
/* Result: [{&quot;match&quot;:&quot;John Doe (30)&quot;,&quot;first&quot;:&quot;John&quot;,&quot;last&quot;:&quot;Doe&quot;,&quot;age&quot;:&quot;30&quot;,&quot;offset&quot;:0,&quot;line&quot;:1}] */
</code></pre></div>
<p><strong>Note</strong>: Raw strings suppress all escape sequences except for escaping the quote character used to enclose the string. This means <code>\x45</code> becomes the literal string <code>"\x45"</code> rather than the character <code>"E"</code>. If you need hex or Unicode escapes to be processed, use regular string literals.</p>
<h3 id="json-output-format">JSON Output Format</h3>
<p>The <code>j</code> option produces JSON output with detailed match information. Each match is returned as a JSON object containing:</p>
<ul>
<li><strong><code>match</code></strong>: The full matched substring</li>
<li><strong>Named groups</strong>: Each named group from the regex pattern (e.g., <code>year</code>, <code>month</code>, <code>day</code>)</li>
<li><strong><code>offset</code></strong>: Byte offset of the match in the input string</li>
<li><strong><code>line</code></strong>: Line number where the match was found</li>
</ul>
<h4 id="json-object-structure">JSON Object Structure</h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;match&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;matched text&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;group1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;captured value&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;group2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;captured value&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;offset&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="examples_1">Examples</h4>
<div class="highlight"><pre><span></span><code>/* Basic JSON output */
&quot;Hello world&quot;.grep(&quot;\\w+&quot;, &quot;oj&quot;)
/* Result: [{&quot;match&quot;:&quot;Hello&quot;,&quot;offset&quot;:0,&quot;line&quot;:1},{&quot;match&quot;:&quot;world&quot;,&quot;offset&quot;:6,&quot;line&quot;:1}] */

/* JSON with named groups */
&quot;John Doe (30)&quot;.grep(&quot;(?P&lt;first&gt;\\w+) (?P&lt;last&gt;\\w+) \\((?P&lt;age&gt;\\d+)\\)&quot;, &quot;oj&quot;)
/* Result: [{&quot;match&quot;:&quot;John Doe (30)&quot;,&quot;first&quot;:&quot;John&quot;,&quot;last&quot;:&quot;Doe&quot;,&quot;age&quot;:&quot;30&quot;,&quot;offset&quot;:0,&quot;line&quot;:1}] */

/* Date parsing with named groups */
&quot;2023-04-27\n2022-12-31&quot;.grep(&quot;(?&lt;year&gt;\\d{4})-(?&lt;month&gt;\\d{2})-(?&lt;day&gt;\\d{2})&quot;, &quot;oj&quot;)
/* Result: [
  {&quot;match&quot;:&quot;2023-04-27&quot;,&quot;year&quot;:&quot;2023&quot;,&quot;month&quot;:&quot;04&quot;,&quot;day&quot;:&quot;27&quot;,&quot;offset&quot;:0,&quot;line&quot;:1},
  {&quot;match&quot;:&quot;2022-12-31&quot;,&quot;year&quot;:&quot;2022&quot;,&quot;month&quot;:&quot;12&quot;,&quot;day&quot;:&quot;31&quot;,&quot;offset&quot;:11,&quot;line&quot;:2}
] */

/* Complex JSON example with multiple patterns */
&quot;Email: user@domain.com, Phone: +1-555-1234&quot;.grep(&quot;(?P&lt;email&gt;[\\w.-]+@[\\w.-]+)|(?P&lt;phone&gt;\\+\\d{1,3}-\\d{3}-\\d{4})&quot;, &quot;oj&quot;)
/* Result: [
  {&quot;match&quot;:&quot;user@domain.com&quot;,&quot;email&quot;:&quot;user@domain.com&quot;,&quot;phone&quot;:null,&quot;offset&quot;:7,&quot;line&quot;:1},
  {&quot;match&quot;:&quot;+1-555-1234&quot;,&quot;email&quot;:null,&quot;phone&quot;:&quot;+1-555-1234&quot;,&quot;offset&quot;:31,&quot;line&quot;:1}
] */
</code></pre></div>
<h4 id="accessing-named-groups">Accessing Named Groups</h4>
<div class="highlight"><pre><span></span><code>/* Extract specific groups from JSON output */
result = &quot;John Doe (30)&quot;.grep(&quot;(?P&lt;first&gt;\\w+) (?P&lt;last&gt;\\w+) \\((?P&lt;age&gt;\\d+)\\)&quot;, &quot;oj&quot;)
first_name = result[0][&quot;first&quot;]  /* &quot;John&quot; */
last_name = result[0][&quot;last&quot;]    /* &quot;Doe&quot; */
age = result[0][&quot;age&quot;]           /* &quot;30&quot; */
</code></pre></div>
<h4 id="notes">Notes</h4>
<ul>
<li><strong>Named groups</strong>: All named groups from the regex pattern are included in the JSON output</li>
<li><strong>Unmatched groups</strong>: Groups that don't match are set to <code>null</code></li>
<li><strong>Line numbers</strong>: Correctly calculated based on newline characters in the input</li>
<li><strong>Offsets</strong>: Byte offsets from the start of the input string</li>
<li><strong>Order</strong>: JSON object key order may vary but all named groups are always present</li>
</ul>
<h3 id="named-groups">Named Groups</h3>
<div class="highlight"><pre><span></span><code>/* Basic named groups */
&quot;John Doe&quot;.grep(&quot;(?P&lt;first&gt;\\w+) (?P&lt;last&gt;\\w+)&quot;, &quot;oj&quot;)
/* Result: [{&quot;match&quot;:&quot;John Doe&quot;,&quot;first&quot;:&quot;John&quot;,&quot;last&quot;:&quot;Doe&quot;,&quot;offset&quot;:0,&quot;line&quot;:1}] */

/* Email extraction */
&quot;Contact: john@example.com&quot;.grep(&quot;(?P&lt;email&gt;[\\w.-]+@[\\w.-]+\\.[a-zA-Z]{2,})&quot;, &quot;oj&quot;)
/* Result: [{&quot;match&quot;:&quot;john@example.com&quot;,&quot;email&quot;:&quot;john@example.com&quot;,&quot;offset&quot;:9,&quot;line&quot;:1}] */

/* Phone number parsing */
&quot;Call +1-555-123-4567&quot;.grep(&quot;(?P&lt;country&gt;\\+\\d{1,3})-(?P&lt;area&gt;\\d{3})-(?P&lt;prefix&gt;\\d{3})-(?P&lt;line&gt;\\d{4})&quot;, &quot;oj&quot;)
/* Result: [{&quot;match&quot;:&quot;+1-555-123-4567&quot;,&quot;country&quot;:&quot;+1&quot;,&quot;area&quot;:&quot;555&quot;,&quot;prefix&quot;:&quot;123&quot;,&quot;line&quot;:&quot;4567&quot;,&quot;offset&quot;:5,&quot;line&quot;:1}] */

/* Direct access to named groups */
result = &quot;John Doe&quot;.grep(&quot;(?P&lt;first&gt;\\w+) (?P&lt;last&gt;\\w+)&quot;, &quot;oj&quot;)
first = result[0][&quot;first&quot;]  /* &quot;John&quot; */
last = result[0][&quot;last&quot;]    /* &quot;Doe&quot; */
</code></pre></div>
<h3 id="context-lines">Context Lines</h3>
<p>Context lines provide surrounding context for matches, similar to ripgrep's <code>-A</code>, <code>-B</code>, and <code>-C</code> options:</p>
<div class="highlight"><pre><span></span><code>input = &quot;Header\nLine 1\nLine 2\nLine 3\nLine 4\nLine 5\nLine 6\nLine 7\nFooter&quot;;

/* After context (2 lines after match) */
input.grep(&quot;Line 2&quot;, &quot;A2&quot;)
[&quot;Line 2&quot;, &quot;Line 3&quot;, &quot;Line 4&quot;]

/* Before context (2 lines before match) */
input.grep(&quot;Line 5&quot;, &quot;B2&quot;)
[&quot;Line 3&quot;, &quot;Line 4&quot;, &quot;Line 5&quot;]

/* Combined context (1 line before and after) */
input.grep(&quot;Line 4&quot;, &quot;A1B1&quot;)
[&quot;Line 3&quot;, &quot;Line 4&quot;, &quot;Line 5&quot;]

/* Context merging - overlapping regions are automatically merged */
input2 = &quot;a\nb\nc\nd\ne\nf&quot;;
input2.grep(&quot;c|d&quot;, &quot;A1B1&quot;)
[&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]  /* Overlapping context merged into single block */
</code></pre></div>
<p><strong>Context Merging</strong>: Overlapping context regions are automatically merged into single blocks, ensuring all relevant context is shown without duplication. This matches ripgrep's behavior for optimal readability and prevents redundant context lines.</p>
<h3 id="context-separators">Context Separators</h3>
<p>When multiple non-overlapping context blocks exist, they are separated by <code>--</code> lines (matching ripgrep/GNU grep behavior):</p>
<div class="highlight"><pre><span></span><code>/* Multiple matches with context - separated by -- lines */
input = &quot;Line 1\nLine 2\nLine 3\nLine 4\nLine 5\nLine 6\nLine 7&quot;;
input.grep(&quot;Line 2|Line 6&quot;, &quot;A1B1&quot;)
/* Result: [&quot;Line 1&quot;, &quot;Line 2&quot;, &quot;Line 3&quot;, &quot;--&quot;, &quot;Line 5&quot;, &quot;Line 6&quot;, &quot;Line 7&quot;] */

/* Context separators are not output in match-only mode */
input.grep(&quot;Line 2|Line 6&quot;, &quot;oA1B1&quot;)
/* Result: [&quot;Line 2&quot;, &quot;Line 6&quot;]  - Only matches, no context or separators */

/* JSON output uses --- as separator */
input.grep(&quot;Line 2|Line 6&quot;, &quot;jA1B1&quot;)
/* Result: [&quot;Line 1&quot;, &quot;Line 2&quot;, &quot;Line 3&quot;, &quot;---&quot;, &quot;Line 5&quot;, &quot;Line 6&quot;, &quot;Line 7&quot;] */
</code></pre></div>
<p><strong>Note</strong>: Context separators are only added between non-overlapping context blocks. When context blocks overlap or are adjacent, no separator is needed.</p>
<h3 id="advanced-regex-features_1">Advanced Regex Features</h3>
<div class="highlight"><pre><span></span><code>/* Unicode categories */
&quot;Hello 世界 123 €&quot;.grep(&quot;\\p{L}+&quot;, &quot;o&quot;)
/* Result: [&quot;Hello&quot;, &quot;世界&quot;] */

/* Unicode scripts */
&quot;Hello 世界&quot;.grep(&quot;\\p{sc=Latin}&quot;, &quot;o&quot;)
/* Result: [&quot;Hello&quot;] */

/* Unicode script extensions */
&quot;Hello 世界&quot;.grep(&quot;\\p{scx:Han}&quot;, &quot;o&quot;)
/* Result: [&quot;世界&quot;] */

/* Unicode general categories */
&quot;Hello World&quot;.grep(&quot;\\p{Lu}&quot;, &quot;o&quot;)
/* Result: [&quot;H&quot;, &quot;W&quot;] */

/* Atomic groups */
&quot;aaaa&quot;.grep(&quot;(?&gt;a+)a&quot;, &quot;o&quot;)
/* Result: [] (atomic group prevents backtracking) */

/* Lookaround assertions */
/* Positive lookahead - word followed by number */
&quot;word123 text456&quot;.grep(&quot;\\w+(?=\\d)&quot;, &quot;o&quot;)
/* Result: [&quot;word&quot;, &quot;text&quot;] */

/* Negative lookahead - word not followed by number */
&quot;word123 text456&quot;.grep(&quot;\\w+(?!\\d)&quot;, &quot;o&quot;)
/* Result: [&quot;word123&quot;, &quot;text456&quot;] */

/* Positive lookbehind - number preceded by word */
&quot;word123 text456&quot;.grep(&quot;(?&lt;=\\w)\\d+&quot;, &quot;o&quot;)
/* Result: [&quot;123&quot;, &quot;456&quot;] */

/* Negative lookbehind - number not preceded by word */
&quot;123 word456&quot;.grep(&quot;(?&lt;!\\w)\\d+&quot;, &quot;o&quot;)
/* Result: [&quot;123&quot;] */

/* Complex password validation */
&quot;password123&quot;.grep(&quot;(?=.*[A-Z])(?=.*[a-z])(?=.*\\d).{8,}&quot;, &quot;o&quot;)
/* Result: [] (no uppercase letter) */

&quot;Password123&quot;.grep(&quot;(?=.*[A-Z])(?=.*[a-z])(?=.*\\d).{8,}&quot;, &quot;o&quot;)
/* Result: [&quot;Password123&quot;] (valid password) */

/* Advanced Unicode properties */
&quot;Hello 😀 World 🌍&quot;.grep(&quot;\\p{Emoji}&quot;, &quot;o&quot;)
/* Result: [&quot;😀&quot;, &quot;🌍&quot;] */

&quot;Hello 👨‍👩‍👧‍👦 World&quot;.grep(&quot;\\p{So}&quot;, &quot;o&quot;)
/* Result: [&quot;👨‍👩‍👧‍👦&quot;] */

/* Advanced Unicode properties with mixed content */
&quot;Hello 世界 😀 🌍&quot;.grep(&quot;\\p{So}&quot;, &quot;o&quot;)
/* Result: [&quot;😀&quot;, &quot;🌍&quot;] (symbols only, not Han characters) */

/* Emoji sequences as symbols */
&quot;Family: 👨‍👩‍👧‍👦&quot;.grep(&quot;\\p{So}&quot;, &quot;o&quot;)
/* Result: [&quot;👨‍👩‍👧‍👦&quot;] (entire family emoji as one symbol) */

/* Possessive quantifiers */
&quot;aaaa&quot;.grep(&quot;a++a&quot;, &quot;o&quot;)
/* Result: [] (possessive quantifier prevents backtracking) */

&quot;aaa&quot;.grep(&quot;a++&quot;, &quot;o&quot;)
/* Result: [&quot;aaa&quot;] (matches all a&#39;s greedily without backtracking) */

/* Edge cases for possessive quantifiers */
&quot;a&quot;.grep(&quot;a?+&quot;, &quot;o&quot;)
/* Result: [&quot;a&quot;] (possessive optional quantifier) */

&quot;abc&quot;.grep(&quot;a*+b&quot;, &quot;o&quot;)
/* Result: [&quot;ab&quot;] (possessive star with following character) */

/* Conditional patterns */
&quot;abc123&quot;.grep(&quot;(a)?(?(1)b|c)&quot;, &quot;o&quot;)
/* Result: [&quot;ab&quot;] (conditional pattern works) */

&quot;c123&quot;.grep(&quot;(a)?(?(1)b|c)&quot;, &quot;o&quot;)
/* Result: [&quot;c&quot;] (alternative branch when &#39;a&#39; is not present) */

/* More complex conditional patterns */
&quot;xyz&quot;.grep(&quot;(x)?(?(1)y|z)&quot;, &quot;o&quot;)
/* Result: [&quot;xy&quot;] (first branch when &#39;x&#39; is present) */

&quot;yz&quot;.grep(&quot;(x)?(?(1)y|z)&quot;, &quot;o&quot;)
/* Result: [&quot;z&quot;] (second branch when &#39;x&#39; is not present) */

/* Context lines */
&quot;Line 1\nLine 2\nLine 3\nLine 4&quot;.grep(&quot;Line 3&quot;, &quot;A1&quot;)
/* Result: [&quot;Line 3&quot;, &quot;Line 4&quot;] (shows 1 line after) */

&quot;Line 1\nLine 2\nLine 3\nLine 4&quot;.grep(&quot;Line 3&quot;, &quot;B1&quot;)
/* Result: [&quot;Line 2&quot;, &quot;Line 3&quot;] (shows 1 line before) */

&quot;Line 1\nLine 2\nLine 3\nLine 4&quot;.grep(&quot;Line 3&quot;, &quot;C1&quot;)
/* Result: [&quot;Line 2&quot;, &quot;Line 3&quot;, &quot;Line 4&quot;] (shows 1 line before and after) */

/* Named groups with JSON output */
&quot;John Doe (30)&quot;.grep(&quot;(?P&lt;first&gt;\\w+) (?P&lt;last&gt;\\w+) \\((?P&lt;age&gt;\\d+)\\)&quot;, &quot;oj&quot;)
/* Result: [{&quot;match&quot;:&quot;John Doe (30)&quot;,&quot;first&quot;:&quot;John&quot;,&quot;last&quot;:&quot;Doe&quot;,&quot;age&quot;:&quot;30&quot;,&quot;offset&quot;:0,&quot;line&quot;:1}] */
</code></pre></div>
<h3 id="json-output-examples">JSON Output Examples</h3>
<div class="highlight"><pre><span></span><code>/* Basic JSON output */
&quot;Hello world&quot;.grep(&quot;\\w+&quot;, &quot;oj&quot;)
/* Result: [{&quot;match&quot;:&quot;Hello&quot;,&quot;offset&quot;:0,&quot;line&quot;:1},{&quot;match&quot;:&quot;world&quot;,&quot;offset&quot;:6,&quot;line&quot;:1}] */

/* JSON with named groups */
&quot;John Doe (30)&quot;.grep(&quot;(?P&lt;first&gt;\\w+) (?P&lt;last&gt;\\w+) \\((?P&lt;age&gt;\\d+)\\)&quot;, &quot;oj&quot;)
/* Result: [{&quot;match&quot;:&quot;John Doe (30)&quot;,&quot;first&quot;:&quot;John&quot;,&quot;last&quot;:&quot;Doe&quot;,&quot;age&quot;:&quot;30&quot;,&quot;offset&quot;:0,&quot;line&quot;:1}] */

/* Complex JSON example */
&quot;Email: user@domain.com, Phone: +1-555-1234&quot;.grep(&quot;(?P&lt;email&gt;[\\w.-]+@[\\w.-]+)|(?P&lt;phone&gt;\\+\\d{1,3}-\\d{3}-\\d{4})&quot;, &quot;oj&quot;)
/* Result: [
  {&quot;match&quot;:&quot;user@domain.com&quot;,&quot;email&quot;:&quot;user@domain.com&quot;,&quot;offset&quot;:7,&quot;line&quot;:1},
  {&quot;match&quot;:&quot;+1-555-1234&quot;,&quot;phone&quot;:&quot;+1-555-1234&quot;,&quot;offset&quot;:31,&quot;line&quot;:1}
] */

/* Accessing named groups directly */
result = &quot;John Doe (30)&quot;.grep(&quot;(?P&lt;first&gt;\\w+) (?P&lt;last&gt;\\w+) \\((?P&lt;age&gt;\\d+)\\)&quot;, &quot;oj&quot;)
first_name = result[0][&quot;first&quot;]  /* &quot;John&quot; */
last_name = result[0][&quot;last&quot;]    /* &quot;Doe&quot; */
age = result[0][&quot;age&quot;]           /* &quot;30&quot; */
</code></pre></div>
<h3 id="additional-parameters-examples">Additional Parameters Examples</h3>
<div class="highlight"><pre><span></span><code>/* Unicode normalization examples */
&quot;café&quot;.grep(&quot;cafe&quot;, &quot;o&quot;, &quot;&quot;, &quot;NFC&quot;)
/* Result: [&quot;café&quot;] - NFC normalization matches decomposed form */

&quot;café&quot;.grep(&quot;cafe&quot;, &quot;o&quot;, &quot;&quot;, &quot;NFD&quot;)
/* Result: [&quot;café&quot;] - NFD normalization matches composed form */

/* Binary mode for raw byte processing */
&quot;\\x48\\x65\\x6c\\x6c\\x6f&quot;.grep(&quot;Hello&quot;, &quot;o&quot;, &quot;&quot;, &quot;NONE&quot;, &quot;BINARY&quot;)
/* Result: [&quot;Hello&quot;] - Binary mode processes raw bytes */

/* Custom delimiter with normalization */
&quot;apple|||pear|||banana&quot;.grep(&quot;\\w+&quot;, &quot;o&quot;, &quot;|||&quot;, &quot;NFC&quot;)
/* Result: [&quot;apple&quot;, &quot;pear&quot;, &quot;banana&quot;] - Custom delimiter with NFC normalization */

/* More custom delimiter examples */
&quot;section1###section2###section3&quot;.grep(&quot;section\\d+&quot;, &quot;o&quot;, &quot;###&quot;)
/* Result: [&quot;section1&quot;, &quot;section2&quot;, &quot;section3&quot;] - Using &quot;###&quot; as delimiter */

&quot;item1|item2|item3&quot;.grep(&quot;item\\d+&quot;, &quot;o&quot;, &quot;|&quot;)
/* Result: [&quot;item1&quot;, &quot;item2&quot;, &quot;item3&quot;] - Using &quot;|&quot; as delimiter */

&quot;record1---record2---record3&quot;.grep(&quot;record\\d+&quot;, &quot;o&quot;, &quot;---&quot;)
/* Result: [&quot;record1&quot;, &quot;record2&quot;, &quot;record3&quot;] - Using &quot;---&quot; as delimiter */

/* Binary mode with custom delimiter */
&quot;data1\\x00data2\\x00data3&quot;.grep(&quot;data\\d+&quot;, &quot;o&quot;, &quot;\\x00&quot;, &quot;NONE&quot;, &quot;BINARY&quot;)
/* Result: [&quot;data1&quot;, &quot;data2&quot;, &quot;data3&quot;] - Binary mode with null delimiter */
</code></pre></div>
<h2 id="performance-features">Performance Features</h2>
<h3 id="caching">Caching</h3>
<ul>
<li>Pattern compilation caching</li>
<li>Text normalization caching</li>
<li>Offset mapping caching</li>
<li>Thread-safe cache management</li>
</ul>
<h3 id="optimization">Optimization</h3>
<ul>
<li>ASCII-only pattern detection</li>
<li>Fast path for simple patterns</li>
<li>Unicode property optimization</li>
<li>Memory-efficient processing</li>
</ul>
<h3 id="performance-optimization-details">Performance Optimization Details</h3>
<p>Grapa grep includes several performance optimizations:</p>
<ol>
<li><strong>Pattern Compilation Caching</strong> - Compiled patterns are cached for reuse</li>
<li><strong>PCRE2 JIT Compilation</strong> - Just-In-Time compilation for fast pattern matching</li>
<li><strong>Fast Path Expansions</strong> - Optimized paths for simple literal, word, and digit patterns</li>
<li><strong>LRU Cache Management</strong> - Thread-safe LRU cache for text normalization</li>
<li><strong>Parallel Processing</strong> - Multi-threaded processing for large inputs</li>
</ol>
<h3 id="parallel-processing">Parallel Processing</h3>
<p>Grapa grep now supports parallel processing for large inputs:</p>
<ul>
<li><strong>Automatic worker detection</strong> - Determines optimal number of threads based on input size</li>
<li><strong>Smart chunking</strong> - Splits input at line boundaries to avoid breaking matches</li>
<li><strong>Thread-safe processing</strong> - Uses std::async for cross-platform compatibility</li>
<li><strong>Fallback to sequential</strong> - Automatically uses single-threaded processing for small inputs</li>
</ul>
<p><strong>Usage:</strong>
<div class="highlight"><pre><span></span><code>/* Automatic parallel processing (recommended) */
&quot;large_input&quot;.grep(&quot;pattern&quot;, &quot;o&quot;)

/* Manual parallel processing with specific worker count */
&quot;large_input&quot;.grep(&quot;pattern&quot;, &quot;o&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, 4)  /* 4 worker threads */

/* Sequential processing (force single-threaded) */
&quot;large_input&quot;.grep(&quot;pattern&quot;, &quot;o&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, 1)  /* 1 worker thread */

/* Auto-detection (same as default) */
&quot;large_input&quot;.grep(&quot;pattern&quot;, &quot;o&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, 0)  /* Auto-detect optimal threads */
</code></pre></div></p>
<p><strong>num_workers Parameter Values:</strong>
- <strong><code>0</code></strong> (default): Auto-detection - determines optimal number of threads based on input size
- <strong><code>1</code></strong>: Sequential processing - forces single-threaded execution
- <strong><code>2+</code></strong>: Parallel processing - uses specified number of worker threads</p>
<p><strong>Performance characteristics:</strong>
- <strong>Small inputs</strong> (&lt; 1MB): Single-threaded processing (auto-detected)
- <strong>Medium inputs</strong> (1-10MB): 2-4 worker threads (auto-detected)
- <strong>Large inputs</strong> (&gt; 10MB): Up to 16 worker threads (auto-detected, configurable)</p>
<p><strong>Note</strong>: All grep features (context lines, invert match, all-mode) work correctly in parallel mode.</p>
<p><strong>Performance Examples:</strong>
<div class="highlight"><pre><span></span><code>/* Large file processing with parallel workers */
large_content.grep(&quot;pattern&quot;, &quot;oj&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, 4)
/* Result: Faster processing with 4 worker threads */

/* Sequential processing for small inputs */
small_content.grep(&quot;pattern&quot;, &quot;oj&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, 1)
/* Result: Sequential processing, no threading overhead */

/* Auto-detection for optimal performance */
any_size_content.grep(&quot;pattern&quot;, &quot;oj&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, 0)
/* Result: Automatically chooses best approach */
</code></pre></div></p>
<h3 id="binary-mode-processing">Binary Mode Processing</h3>
<h4 id="when-to-use-binary-mode">When to Use Binary Mode</h4>
<p>Binary mode is useful for:
- <strong>Binary files</strong>: Executables, images, compressed files
- <strong>Network data</strong>: Raw packet analysis
- <strong>Memory dumps</strong>: Forensic analysis
- <strong>Data that should not be Unicode-processed</strong></p>
<h4 id="binary-vs-unicode-mode">Binary vs Unicode Mode</h4>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Unicode Mode</th>
<th>Binary Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Processing</strong></td>
<td>Full Unicode normalization and case folding</td>
<td>Raw byte processing</td>
</tr>
<tr>
<td><strong>Performance</strong></td>
<td>Slower due to Unicode overhead</td>
<td>Faster for binary data</td>
</tr>
<tr>
<td><strong>Memory</strong></td>
<td>Higher due to normalization</td>
<td>Lower memory usage</td>
</tr>
<tr>
<td><strong>Use case</strong></td>
<td>Text files, user input</td>
<td>Binary files, network data</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>/* Unicode mode (default) - for text files */
&quot;café&quot;.grep(&quot;cafe&quot;, &quot;i&quot;)               /* Case-insensitive with Unicode folding */

/* Binary mode - for binary data */
&quot;\\x48\\x65\\x6c\\x6c\\x6f&quot;.grep(&quot;Hello&quot;, &quot;o&quot;, &quot;&quot;, &quot;NONE&quot;, &quot;BINARY&quot;)
/* Result: [&quot;Hello&quot;] - Raw byte processing */

/* Binary data with null delimiters */
&quot;data1\\x00data2\\x00data3&quot;.grep(&quot;data\\d+&quot;, &quot;o&quot;, &quot;\\x00&quot;, &quot;NONE&quot;, &quot;BINARY&quot;)
/* Result: [&quot;data1&quot;, &quot;data2&quot;, &quot;data3&quot;] - Binary mode with null delimiter */
</code></pre></div>
<h3 id="advanced-usage-patterns">Advanced Usage Patterns</h3>
<h4 id="complex-context-line-combinations">Complex Context Line Combinations</h4>
<p>Context options can be combined flexibly for sophisticated output:</p>
<div class="highlight"><pre><span></span><code>/* Show 2 lines after, 1 line before, and 3 lines before/after */
&quot;Line 1\nLine 2\nLine 3\nLine 4\nLine 5&quot;.grep(&quot;Line 3&quot;, &quot;A2B1C3&quot;)
/* Result: [&quot;Line 2&quot;, &quot;Line 3&quot;, &quot;Line 4&quot;, &quot;Line 5&quot;] 
(B1: Line 2, A2: Line 4-5, C3: additional context)
Note: Overlapping context lines are allowed for complete coverage */

/* Show 1 line before and 2 lines after */
&quot;Line 1\nLine 2\nLine 3\nLine 4&quot;.grep(&quot;Line 3&quot;, &quot;B1A2&quot;)
/* Result: [&quot;Line 2&quot;, &quot;Line 3&quot;, &quot;Line 4&quot;] */

/* Show 3 lines before and 1 line after */
&quot;Line 1\nLine 2\nLine 3\nLine 4\nLine 5&quot;.grep(&quot;Line 4&quot;, &quot;B3A1&quot;)
/* Result: [&quot;Line 1&quot;, &quot;Line 2&quot;, &quot;Line 3&quot;, &quot;Line 4&quot;, &quot;Line 5&quot;] */
</code></pre></div>
<h4 id="performance-tuning-for-large-datasets">Performance Tuning for Large Datasets</h4>
<p><strong>For very large files (&gt;100MB)</strong>:
<div class="highlight"><pre><span></span><code>/* Use &#39;a&#39; option for single-string processing */
large_content.grep(&quot;pattern&quot;, &quot;a&quot;)     /* Process as single string */

/* Use specific Unicode properties instead of broad categories */
large_content.grep(&quot;\\p{Lu}&quot;, &quot;o&quot;)     /* Better than \\p{L} for uppercase only */

/* Disable normalization if not needed */
large_content.grep(&quot;pattern&quot;, &quot;o&quot;)     /* No &#39;N&#39; option unless required */

/* Use fast path patterns when possible */
large_content.grep(&quot;\\w+&quot;, &quot;o&quot;)        /* Fast path for word matching */
</code></pre></div></p>
<p><strong>Memory usage considerations</strong>:
- <strong>Cache size</strong>: LRU cache limits memory usage automatically
- <strong>Pattern compilation</strong>: Compiled patterns are cached but use memory
- <strong>Large files</strong>: Consider processing in chunks for very large files</p>
<h4 id="thread-safety">Thread Safety</h4>
<p>All grep operations are thread-safe:
- <strong>Concurrent access</strong>: Multiple threads can call grep simultaneously
- <strong>Cache safety</strong>: All caches are protected with mutexes
- <strong>No shared state</strong>: Each grep call is independent</p>
<div class="highlight"><pre><span></span><code>/* Thread-safe concurrent usage */
/* Thread 1 */
result1 = text.grep(&quot;pattern1&quot;, &quot;oj&quot;)

/* Thread 2 (simultaneous) */
result2 = text.grep(&quot;pattern2&quot;, &quot;oj&quot;)

/* Both operations are safe and independent */
</code></pre></div>
<h3 id="troubleshooting">Troubleshooting</h3>
<h4 id="common-regex-compilation-errors">Common Regex Compilation Errors</h4>
<p><strong>Invalid pattern syntax</strong>:
<div class="highlight"><pre><span></span><code>/* Unmatched parentheses */
&quot;text&quot;.grep(&quot;(&quot;, &quot;j&quot;)                  /* Error: Unmatched &#39;(&#39; */

/* Invalid quantifier */
&quot;text&quot;.grep(&quot;a{&quot;, &quot;j&quot;)                 /* Error: Invalid quantifier */

/* Invalid Unicode property */
&quot;text&quot;.grep(&quot;\\p{Invalid}&quot;, &quot;j&quot;)       /* Error: Unknown property */
</code></pre></div></p>
<p><strong>Solutions</strong>:
<div class="highlight"><pre><span></span><code>/* Fix unmatched parentheses */
&quot;text&quot;.grep(&quot;(group)&quot;, &quot;j&quot;)            /* Valid: matched parentheses */

/* Fix invalid quantifier */
&quot;text&quot;.grep(&quot;a{1,3}&quot;, &quot;j&quot;)             /* Valid: proper quantifier */

/* Use valid Unicode properties */
&quot;text&quot;.grep(&quot;\\p{L}&quot;, &quot;j&quot;)             /* Valid: letter property */
</code></pre></div></p>
<h4 id="performance-issues">Performance Issues</h4>
<p><strong>Slow pattern matching</strong>:
<div class="highlight"><pre><span></span><code>/* Problem: Catastrophic backtracking */
/* Create long string manually (Grapa doesn&#39;t have repeat function) */
long_string = &quot;&quot;;
i = 0;
while (i &lt; 10000) {
    long_string = long_string + &quot;a&quot;;
    i = i + 1;
}
long_string.grep(&quot;(a+)+&quot;, &quot;o&quot;)   /* Very slow */

/* Solution: Use atomic groups */
long_string.grep(&quot;(?&gt;a+)+&quot;, &quot;o&quot;) /* Much faster */

/* Problem: Broad Unicode categories */
&quot;text&quot;.grep(&quot;\\p{L}+&quot;, &quot;o&quot;)            /* Slower for large text */

/* Solution: Use specific properties */
&quot;text&quot;.grep(&quot;\\p{Lu}+&quot;, &quot;o&quot;)           /* Faster for uppercase only */
</code></pre></div></p>
<p><strong>Memory usage issues</strong>:
<div class="highlight"><pre><span></span><code>/* Problem: Large cache accumulation */
/* Solution: Process in smaller chunks or restart application */

/* Problem: Large compiled patterns */
/* Solution: Use simpler patterns or break into multiple searches */
</code></pre></div></p>
<h4 id="unicode-normalization-issues">Unicode Normalization Issues</h4>
<p><strong>Unexpected matches</strong>:
<div class="highlight"><pre><span></span><code>/* Problem: Different normalization forms */
&quot;café&quot;.grep(&quot;cafe&quot;, &quot;o&quot;)               /* No match without normalization */

/* Solution: Use normalization */
&quot;café&quot;.grep(&quot;cafe&quot;, &quot;N&quot;)               /* Matches with NFC normalization */

/* Problem: Case sensitivity with Unicode */
&quot;İstanbul&quot;.grep(&quot;istanbul&quot;, &quot;i&quot;)       /* May not match due to Turkish &#39;İ&#39; */

/* Solution: Use diacritic-insensitive matching */
&quot;İstanbul&quot;.grep(&quot;istanbul&quot;, &quot;di&quot;)      /* Matches with diacritic stripping */
</code></pre></div></p>
<h4 id="debugging-tips">Debugging Tips</h4>
<p><strong>Check pattern validity</strong>:
<div class="highlight"><pre><span></span><code>/* Test pattern compilation */
result = text.grep(&quot;pattern&quot;, &quot;j&quot;)
if (result.type() == $ERR) {
    echo(&quot;Pattern compilation failed&quot;)
    /* Check pattern syntax */
}
</code></pre></div></p>
<p><strong>Verify Unicode handling</strong>:
<div class="highlight"><pre><span></span><code>/* Test Unicode normalization */
&quot;café&quot;.grep(&quot;cafe&quot;, &quot;N&quot;)               /* Should match with normalization */

/* Test case folding */
&quot;CAFÉ&quot;.grep(&quot;cafe&quot;, &quot;i&quot;)               /* Should match case-insensitive */

/* Test diacritic stripping */
&quot;café&quot;.grep(&quot;cafe&quot;, &quot;d&quot;)               /* Should match diacritic-insensitive */
</code></pre></div></p>
<p><strong>Performance profiling</strong>:
<div class="highlight"><pre><span></span><code>/* Test with small sample first */
sample = large_text.substring(0, 1000)
result = sample.grep(&quot;pattern&quot;, &quot;oj&quot;)   /* Test pattern on small sample */

/* If successful, test on full text */
if (result.type() != $ERR) {
    full_result = large_text.grep(&quot;pattern&quot;, &quot;oj&quot;)
}
</code></pre></div></p>
<h2 id="testing-and-verification">Testing and Verification</h2>
<h3 id="performance-testing">Performance Testing</h3>
<p>A comprehensive performance test file is available to verify optimizations:</p>
<div class="highlight"><pre><span></span><code>/* Run performance tests */
grapa -cfile &quot;test_performance_optimizations.grc&quot;
</code></pre></div>
<p><strong>Test Coverage</strong>:
- JIT compilation detection and functionality
- Fast path optimizations for literal, word, and digit patterns
- LRU cache functionality for text normalization
- Complex Unicode pattern performance
- Mixed pattern performance
- Edge case handling</p>
<h3 id="capability-testing">Capability Testing</h3>
<p>Verify current Unicode and regex capabilities:</p>
<div class="highlight"><pre><span></span><code>/* Run comprehensive capability tests */
grapa -cfile &quot;test_current_capabilities.grc&quot;
</code></pre></div>
<p><strong>Test Coverage</strong>:
- Basic Unicode properties (<code>\p{L}</code>, <code>\p{N}</code>, etc.)
- Named groups and JSON output
- Lookaround assertions
- Unicode grapheme clusters
- Advanced Unicode properties
- Context lines
- Atomic groups
- Possessive quantifiers
- Conditional patterns
- Unicode scripts and script extensions
- Unicode general categories
- Unicode blocks (not supported)
- Unicode age properties (not supported)
- Unicode bidirectional classes (not supported)</p>
<h3 id="feature-specific-tests">Feature-Specific Tests</h3>
<p>Individual test files for specific features:</p>
<div class="highlight"><pre><span></span><code>/* Test Unicode normalization and diacritic handling */
grapa -cfile &quot;test_grapheme_unicode_normalization.grc&quot;

/* Test advanced Unicode features */
grapa -cfile &quot;test_unicode_advanced_features.grc&quot;

/* Test lookaround assertions */
grapa -cfile &quot;test_lookaround_assertions.grc&quot;

/* Test atomic groups */
grapa -cfile &quot;test_atomic_groups.grc&quot;

/* Test Unicode grapheme clusters */
grapa -cfile &quot;test_unicode_grapheme_clusters.grc&quot;
</code></pre></div>
<h3 id="regression-testing">Regression Testing</h3>
<p>To ensure no regressions after changes:</p>
<div class="highlight"><pre><span></span><code>/* Run core functionality tests */
grapa -cfile &quot;test_current_capabilities.grc&quot;
grapa -cfile &quot;test_performance_optimizations.grc&quot;

/* Verify basic functionality */
&quot;Hello world&quot;.grep(&quot;world&quot;, &quot;oj&quot;)       /* Should return matches */
&quot;café&quot;.grep(&quot;cafe&quot;, &quot;N&quot;)               /* Should match with normalization */
&quot;Hello 世界&quot;.grep(&quot;\\p{L}+&quot;, &quot;oj&quot;)      /* Should match Unicode letters */
</code></pre></div>
<h2 id="zero-length-match-and-empty-string-output">Zero-Length Match and Empty String Output</h2>
<blockquote>
<p><strong>Update (2024-12):</strong> Zero-length matches and explicit empty strings in arrays are now correctly output as <code>""</code> (empty string), never as <code>null</code>. This matches ripgrep's behavior and ensures round-trip consistency and correct scripting semantics. The previous null output bug has been resolved.</p>
</blockquote>
<h3 id="example-zero-length-match">Example: Zero-Length Match</h3>
<div class="highlight"><pre><span></span><code>/* Zero-length match example */
&quot;a\nb\n&quot;.grep(&quot;^&quot;, &quot;o&quot;)
/* Result: [&quot;&quot;, &quot;a&quot;, &quot;&quot;, &quot;b&quot;, &quot;&quot;] */
</code></pre></div>
<h3 id="example-array-literal-with-empty-string">Example: Array Literal with Empty String</h3>
<div class="highlight"><pre><span></span><code>[1, &quot;&quot;, 2]
/* Result: [1, &quot;&quot;, 2] */
</code></pre></div>
<h2 id="output-formatting-and-array-design_1">Output Formatting and Array Design</h2>
<h3 id="why-arrays-instead-of-strings_1">Why Arrays Instead of Strings?</h3>
<p>Grapa grep is designed as an <strong>integrated programming language feature</strong>, not a standalone console tool. This fundamental difference explains the output format:</p>
<p><strong>Grapa Grep (Integrated Language):</strong>
- Returns <strong>arrays of strings</strong> for programmatic use
- <strong>Removes delimiters</strong> from output strings (clean data for processing)
- Designed for scripting and data manipulation
- Example: <code>["line1", "line2", "line3"]</code> (no <code>\n</code> in strings)</p>
<p><strong>ripgrep/GNU grep (Console Tools):</strong>
- Outputs <strong>single string</strong> with embedded delimiters
- <strong>Preserves delimiters</strong> in output for console display
- Designed for command-line text processing
- Example: <code>"line1\nline2\nline3\n"</code> (with <code>\n</code> in string)</p>
<h3 id="delimiter-removal-behavior_1">Delimiter Removal Behavior</h3>
<p>Grapa grep <strong>automatically removes delimiters</strong> from output strings:</p>
<div class="highlight"><pre><span></span><code>/* Input with custom delimiter */
input = &quot;line1|||line2|||line3&quot;;

/* Grapa grep removes delimiters from output */
result = input.grep(&quot;line&quot;, &quot;o&quot;, &quot;|||&quot;);
/* Result: [&quot;line1&quot;, &quot;line2&quot;, &quot;line3&quot;] (clean strings, no |||) */

/* For console output, you can join with delimiter */
console_output = result.join(&quot;|||&quot;);
/* Result: &quot;line1|||line2|||line3&quot; */
</code></pre></div>
<h3 id="console-output-equivalence_1">Console Output Equivalence</h3>
<p>To get console-equivalent output in Grapa:</p>
<div class="highlight"><pre><span></span><code>/* Grapa approach */
input = &quot;line1\nline2\nline3&quot;;
result = input.grep(&quot;line&quot;, &quot;o&quot;);  /* [&quot;line1&quot;, &quot;line2&quot;, &quot;line3&quot;] */
console_output = result.join(&quot;\n&quot;);  /* &quot;line1\nline2\nline3&quot; */

/* This matches ripgrep output: &quot;line1\nline2\nline3&quot; */
</code></pre></div>
<h3 id="benefits-of-array-design_1">Benefits of Array Design</h3>
<ol>
<li><strong>Programmatic Use</strong>: Arrays are easier to process in scripts</li>
<li><strong>Clean Data</strong>: No delimiter artifacts in output strings</li>
<li><strong>Flexible Output</strong>: Can join with any delimiter for different formats</li>
<li><strong>Language Integration</strong>: Natural fit with Grapa's array-based design</li>
<li><strong>Python Integration</strong>: Arrays map naturally to Python lists</li>
</ol>
<h3 id="custom-delimiter-support_1">Custom Delimiter Support</h3>
<p>Grapa grep fully supports <strong>multi-character delimiters</strong>:</p>
<div class="highlight"><pre><span></span><code>/* Single character delimiter */
&quot;line1|line2|line3&quot;.grep(&quot;line&quot;, &quot;o&quot;, &quot;|&quot;)
/* Result: [&quot;line1&quot;, &quot;line2&quot;, &quot;line3&quot;] */

/* Multi-character delimiter */
&quot;line1|||line2|||line3&quot;.grep(&quot;line&quot;, &quot;o&quot;, &quot;|||&quot;)
/* Result: [&quot;line1&quot;, &quot;line2&quot;, &quot;line3&quot;] */

/* Complex delimiter */
&quot;line1&lt;DELIM&gt;line2&lt;DELIM&gt;line3&quot;.grep(&quot;line&quot;, &quot;o&quot;, &quot;&lt;DELIM&gt;&quot;)
/* Result: [&quot;line1&quot;, &quot;line2&quot;, &quot;line3&quot;] */
</code></pre></div>
<p><strong>Note</strong>: All delimiters are automatically removed from output strings, regardless of length or complexity.</p>
<h2 id="error-output">Error Output</h2>
<blockquote>
<p><strong>Note:</strong> Invalid regex patterns always return <code>"$ERR"</code> (not a JSON object or other format).</p>
</blockquote>
<h2 id="test-coverage-and-regression-testing">Test Coverage and Regression Testing</h2>
<blockquote>
<p><strong>Update (2024-12):</strong> The test suite now includes explicit checks for empty string vs null output, zero-length matches, and all advanced edge cases to ensure full ripgrep parity (excluding file system features). The previous null output bug is now fixed. See <a href="../../TESTING/">Testing Documentation</a> for details.</p>
</blockquote>
<h2 id="comprehensive-features-summary">Comprehensive Features Summary</h2>
<blockquote>
<p><strong>Update (2024-06):</strong> Grapa grep now matches ripgrep for all in-memory/streaming features, with the only exception being SIMD optimizations and file system integration. All advanced Unicode, regex, and context features are fully supported and tested.</p>
</blockquote>
<h3 id="fully-supported-features">✅ <strong>Fully Supported Features</strong></h3>
<p><strong>Unicode Support:</strong>
- ✅ <strong>Basic Unicode properties</strong> (<code>\p{L}</code>, <code>\p{N}</code>, <code>\p{Z}</code>, <code>\p{P}</code>, <code>\p{S}</code>, <code>\p{C}</code>, <code>\p{M}</code>)
- ✅ <strong>Advanced Unicode properties</strong> (<code>\p{Emoji}</code>, <code>\p{So}</code>, <code>\p{Sc}</code>, etc.)
- ✅ <strong>Unicode scripts</strong> (<code>\p{sc=Latin}</code>, <code>\p{sc=Han}</code>, <code>\p{sc=Cyrillic}</code>, etc.)
- ✅ <strong>Unicode script extensions</strong> (<code>\p{scx:Han}</code>, etc.)
- ✅ <strong>Unicode general categories</strong> (<code>\p{Lu}</code>, <code>\p{Ll}</code>, <code>\p{Lt}</code>, etc.)
- ✅ <strong>Unicode grapheme clusters</strong> (<code>\X</code>) - handles emoji sequences, combining characters
- ✅ <strong>Unicode normalization</strong> (NFC, NFD, NFKC, NFKD)
- ✅ <strong>Case-insensitive matching</strong> with proper Unicode case folding</p>
<p><strong>Advanced Regex Features:</strong>
- ✅ <strong>Named groups</strong> (<code>(?P&lt;name&gt;...)</code>)
- ✅ <strong>Atomic groups</strong> (<code>(?&gt;...)</code>)
- ✅ <strong>Lookaround assertions</strong> (<code>(?=...)</code>, <code>(?&lt;=...)</code>, <code>(?!...)</code>, <code>(?&lt;!...)</code>)
- ✅ <strong>Possessive quantifiers</strong> (<code>*+</code>, <code>++</code>, <code>?+</code>, <code>{n,m}+</code>)
- ✅ <strong>Conditional patterns</strong> (<code>?(condition)...</code>)</p>
<p><strong>Output and Context Features:</strong>
- ✅ <strong>JSON output</strong> with named groups, offsets, and line numbers
- ✅ <strong>Context lines</strong> (<code>A&lt;n&gt;</code>, <code>B&lt;n&gt;</code>, <code>C&lt;n&gt;</code>) with flexible combinations
- ✅ <strong>All basic grep options</strong> (<code>o</code>, <code>i</code>, <code>v</code>, <code>x</code>, <code>n</code>, <code>l</code>, <code>b</code>, <code>c</code>, <code>d</code>, <code>g</code>)</p>
<p><strong>Performance Features:</strong>
- ✅ <strong>Pattern compilation caching</strong>
- ✅ <strong>Text normalization caching</strong>
- ✅ <strong>Offset mapping caching</strong>
- ✅ <strong>Thread-safe cache management</strong></p>
<h3 id="not-supported-3-specialized-features">❌ <strong>Not Supported (3 specialized features):</strong></h3>
<ul>
<li>❌ <strong>Unicode blocks</strong> (<code>\p{In_Basic_Latin}</code>) - use Unicode scripts instead</li>
<li>❌ <strong>Unicode age properties</strong> (<code>\p{Age=1.1}</code>) - very specialized</li>
<li>❌ <strong>Unicode bidirectional classes</strong> (<code>\p{Bidi_Class:Left_To_Right}</code>) - very specialized</li>
</ul>
<p><strong>Coverage:</strong> Grapa supports <strong>95%+ of practical Unicode and regex use cases</strong> with production-ready reliability.</p>
<h2 id="features-not-currently-supported">Features Not Currently Supported</h2>
<h3 id="search-strategy-features"><strong>Search Strategy Features</strong></h3>
<ul>
<li>✅ <strong>Case-insensitive matching</strong> - Use "i" flag for explicit case-insensitive matching: <code>"word".grep("hello", "i")</code></li>
<li>✅ <strong>Word boundary mode</strong> - Use "w" option or <code>\b</code> pattern anchors: <code>"word".grep("hello", "w")</code> or <code>"word".grep("\\bhello\\b", "o")</code></li>
<li>✅ <strong>Column numbers</strong> - Use "T" option for column numbers: <code>"word".grep("hello", "oT")</code></li>
</ul>
<p><strong>Note</strong>: Grapa uses explicit "i" flag for case-insensitive matching rather than ripgrep's automatic smart-case behavior. This provides more predictable and explicit control over case sensitivity.</p>
<h3 id="file-handling-features-handled-by-grapa-language-or-python-integration"><strong>File Handling Features</strong> (handled by Grapa language or Python integration)</h3>
<ul>
<li>❌ <strong>Automatic .gitignore support</strong> - Grapa handles file filtering separately via <code>file().ls()</code> with filters</li>
<li>❌ <strong>File type detection</strong> - Use Grapa's file operations (<code>file().extension()</code>, <code>file().type()</code>) instead</li>
<li>❌ <strong>File size limits</strong> - Use Grapa's file size checking (<code>file().size()</code>) before grep operations</li>
<li>❌ <strong>Hidden file filtering</strong> - Use Grapa's file listing with filters (<code>file().ls(".*", "h")</code>)</li>
</ul>
<p><strong>Note:</strong> Many of these features are handled differently in Grapa's integrated environment, where file operations and filtering are managed by the Grapa language or Python integration rather than within the grep function itself. This design provides more flexibility and control over file operations.</p>
<h2 id="summary-actual-missing-features-excluding-file-handling">Summary: Actual Missing Features (Excluding File Handling)</h2>
<p>When you exclude file handling (since that's handled by the Grapa language), Grapa grep is missing just <strong>1 feature</strong> that ripgrep has:</p>
<h3 id="performance-features-1-missing"><strong>Performance Features (1 missing)</strong></h3>
<ul>
<li>❌ <strong>SIMD optimizations</strong> - Standard optimizations (ripgrep uses CPU vector instructions)</li>
</ul>
<p><strong>Bottom Line:</strong> Grapa grep has about <strong>95%+ of ripgrep's core text processing features</strong>, plus several unique advanced Unicode capabilities that ripgrep doesn't have. The main gaps are in <strong>performance optimizations</strong>.</p>
<h2 id="achieving-missing-features-in-grapa"><strong>Achieving "Missing" Features in Grapa</strong></h2>
<h3 id="case-insensitive-matching"><strong>Case-Insensitive Matching</strong></h3>
<div class="highlight"><pre><span></span><code>/* ripgrep: rg -i &quot;hello&quot; (explicit case-insensitive) */
&quot;Hello WORLD&quot;.grep(&quot;hello&quot;, &quot;i&quot;)

/* ripgrep: rg &quot;HELLO&quot; (case-sensitive for uppercase) */
&quot;Hello WORLD&quot;.grep(&quot;HELLO&quot;, &quot;&quot;)

/* Note: Grapa uses explicit &quot;i&quot; flag rather than ripgrep&#39;s automatic smart-case behavior */
/* This provides more predictable and explicit control over case sensitivity */
</code></pre></div>
<h3 id="word-boundary-mode"><strong>Word Boundary Mode</strong></h3>
<div class="highlight"><pre><span></span><code>/* ripgrep: rg --word-regexp &quot;hello&quot; */
&quot;hello world&quot;.grep(&quot;hello&quot;, &quot;wo&quot;)  /* Using &#39;w&#39; option */
/* or */
&quot;hello world&quot;.grep(&quot;\\bhello\\b&quot;, &quot;o&quot;)  /* Manual word boundaries */
</code></pre></div>
<h3 id="column-numbers"><strong>Column Numbers</strong></h3>
<div class="highlight"><pre><span></span><code>/* ripgrep: rg --column &quot;hello&quot; */
&quot;hello world&quot;.grep(&quot;hello&quot;, &quot;oT&quot;)  /* Shows column:match format */
/* Result: [&quot;1:hello&quot;] */
</code></pre></div>
<h2 id="grapa-vs-ripgrep-feature-comparison-summary">Grapa vs. ripgrep: Feature Comparison Summary</h2>
<h3 id="grapas-strengths-where-grapa-excels"><strong>Grapa's Strengths (Where Grapa excels)</strong></h3>
<ul>
<li>✅ <strong>Advanced Unicode</strong> - Grapheme clusters, normalization, diacritic-insensitive matching</li>
<li>✅ <strong>Language Integration</strong> - Native part of Grapa language, not standalone</li>
<li>✅ <strong>Advanced Regex</strong> - Named groups, atomic groups, lookaround assertions</li>
<li>✅ <strong>JSON Output</strong> - Structured output with metadata</li>
<li>✅ <strong>JIT Compilation</strong> - Fast pattern matching</li>
<li>✅ <strong>Unicode Properties</strong> - Full Unicode categories, scripts, and properties</li>
</ul>
<h3 id="ripgreps-strengths-where-ripgrep-excels"><strong>ripgrep's Strengths (Where ripgrep excels)</strong></h3>
<ul>
<li>✅ <strong>Performance</strong> - SIMD optimizations</li>
<li>✅ <strong>File Handling</strong> - Automatic .gitignore, file type detection, size limits, memory-mapped I/O (standalone tool)</li>
</ul>
<h3 id="shared-strengths-both-tools-excel"><strong>Shared Strengths (Both tools excel)</strong></h3>
<ul>
<li>✅ <strong>Regex Engine</strong> - Full PCRE2 support with Unicode</li>
<li>✅ <strong>Case Handling</strong> - Case-sensitive and case-insensitive modes</li>
<li>✅ <strong>Context Lines</strong> - Before/after context with <code>-A</code>, <code>-B</code>, <code>-C</code></li>
<li>✅ <strong>Binary Mode</strong> - Skip binary files or search within them</li>
<li>✅ <strong>Line Numbers</strong> - Show line numbers with <code>-n</code></li>
<li>✅ <strong>Invert Match</strong> - Show non-matching lines with <code>-v</code></li>
<li>✅ <strong>Case-insensitive matching</strong> - Use "i" flag for explicit case-insensitive matching</li>
<li>✅ <strong>Word boundary mode</strong> - Use "w" option or <code>\b</code> pattern anchors</li>
<li>✅ <strong>Column numbers</strong> - Use "T" option for column:match format</li>
<li>✅ <strong>Parallel processing</strong> - Multi-threaded processing for large inputs</li>
</ul>
<h3 id="feature-coverage-comparison"><strong>Feature Coverage Comparison</strong></h3>
<p><strong>Grapa grep covers ~95% of ripgrep's non-file-system features:</strong>
- ✅ All core text processing, regex, Unicode, and search strategy features
- ❌ Only missing: SIMD (vectorized) search optimizations</p>
<p><strong>ripgrep covers ~80-85% of Grapa grep's features:</strong>
- ✅ Core regex, case handling, context lines, binary mode, line numbers, invert match
- ❌ Missing: Unicode normalization, diacritic-insensitive matching, grapheme clusters, advanced Unicode properties, script extensions, flexible JSON output, integrated language features, Python integration</p>
<h3 id="when-to-use-each-tool"><strong>When to Use Each Tool</strong></h3>
<table>
<thead>
<tr>
<th>Use Case</th>
<th>Recommended Tool</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>International Text Processing</strong></td>
<td>Grapa</td>
<td>Best Unicode support, normalization, diacritic-insensitive</td>
</tr>
<tr>
<td><strong>High-Performance File Search</strong></td>
<td>ripgrep</td>
<td>Fastest for large file systems, multi-threaded</td>
</tr>
<tr>
<td><strong>Integrated Development</strong></td>
<td>Grapa</td>
<td>Part of programming environment, Python integration</td>
</tr>
<tr>
<td><strong>Command-line Search</strong></td>
<td>ripgrep</td>
<td>Optimized for CLI usage, smart defaults</td>
</tr>
<tr>
<td><strong>Unicode Analysis</strong></td>
<td>Grapa</td>
<td>Grapheme clusters, normalization, advanced Unicode features</td>
</tr>
<tr>
<td><strong>Large-scale File Operations</strong></td>
<td>Grapa</td>
<td>Parallel processing, integrated language</td>
</tr>
<tr>
<td><strong>Cross-platform Scripts</strong></td>
<td>Grapa</td>
<td>Consistent behavior, integrated language</td>
</tr>
<tr>
<td><strong>File Processing Workflows</strong></td>
<td>Grapa</td>
<td>File operations handled by language, grep focuses on text processing</td>
</tr>
</tbody>
</table>
<p><strong>Bottom Line:</strong> Grapa grep has about <strong>95%</strong> of ripgrep's core text processing features, plus unique advanced Unicode capabilities. ripgrep covers about <strong>80-85%</strong> of Grapa grep's features. For most text processing tasks, especially Unicode-heavy work, Grapa is quite capable. ripgrep remains the gold standard for high-performance file system searches. </p>
<h2 id="grapas-integrated-approach-vs-ripgreps-standalone-approach">Grapa's Integrated Approach vs. ripgrep's Standalone Approach</h2>
<h3 id="file-handling-philosophy"><strong>File Handling Philosophy</strong></h3>
<p><strong>ripgrep (Standalone Tool):</strong>
- File handling is built into the grep function
- Automatic .gitignore support
- File type detection and filtering
- File size limits and hidden file handling
- Optimized for command-line file system searches</p>
<p><strong>Grapa (Integrated Language):</strong>
- File handling is separated from text processing
- File operations use Grapa language functions: <code>file().ls()</code>, <code>file().size()</code>, <code>file().type()</code>
- More flexible and programmable file filtering
- grep function focuses purely on text pattern matching
- Better for complex workflows and integrated development</p>
<h3 id="example-file-processing-workflow"><strong>Example: File Processing Workflow</strong></h3>
<p><strong>ripgrep approach:</strong>
<div class="highlight"><pre><span></span><code>rg<span class="w"> </span><span class="s2">&quot;pattern&quot;</span><span class="w"> </span>--type<span class="w"> </span>python<span class="w"> </span>--max-filesize<span class="w"> </span>1M<span class="w"> </span>--hidden
</code></pre></div></p>
<p><strong>Grapa approach:</strong>
<div class="highlight"><pre><span></span><code>/* File operations handled by language */
files = file().ls(&quot;*.py&quot;, &quot;h&quot;);  /* Get Python files, including hidden */
filtered = files.filter(f =&gt; file().size(f) &lt; 1024*1024);  /* Size filter */
content = filtered.map(f =&gt; file().read(f));  /* Read files */
matches = content.grep(&quot;pattern&quot;, &quot;oj&quot;);  /* Pure text processing */
</code></pre></div></p>
<p>This separation allows Grapa grep to focus on what it does best: advanced Unicode text processing with sophisticated regex features, while file operations are handled by the appropriate language constructs.</p>
<h2 id="feature-status">Feature Status</h2>
<h3 id="fully-implemented-features">✅ Fully Implemented Features</h3>
<p><strong>Core Grep Features:</strong>
- ✅ Basic pattern matching
- ✅ Case-insensitive matching (<code>i</code> option)
- ✅ Match-only output (<code>o</code> option) - Comprehensive Unicode support
- ✅ Invert match (<code>v</code> option)
- ✅ Line numbers (<code>n</code> option)
- ✅ Count only (<code>c</code> option)
- ✅ All-mode (<code>a</code> option)
- ✅ Exact match (<code>x</code> option)</p>
<p><strong>Advanced Features:</strong>
- ✅ Word boundaries (<code>w</code> option) - Full ripgrep compatibility
- ✅ Context lines (A<n>, B<n>, C<n>) - With merging and separators
- ✅ Context separators (<code>--</code> between non-overlapping blocks)
- ✅ Column numbers (<code>T</code> option) - 1-based positioning
- ✅ Color output (<code>L</code> option) - ANSI color codes
- ✅ Custom delimiters
- ✅ JSON output (<code>j</code> option)</p>
<p><strong>Unicode Features:</strong>
- ✅ Unicode normalization (<code>N</code> option)
- ✅ Diacritic-insensitive matching (<code>d</code> option)
- ✅ Unicode properties (<code>\p{L}</code>, <code>\p{N}</code>, etc.)
- ✅ Grapheme clusters (<code>\X</code> pattern)
- ✅ Comprehensive Unicode "o" option support
- ✅ Unicode boundary handling with hybrid mapping</p>
<p><strong>Performance Features:</strong>
- ✅ JIT compilation
- ✅ Parallel processing
- ✅ Fast path optimizations
- ✅ Binary mode
- ✅ LRU caching</p>
<p><strong>Error Handling:</strong>
- ✅ Graceful error handling
- ✅ Invalid pattern recovery
- ✅ Bounds checking
- ✅ UTF-8 validation</p>
<h3 id="known-limitations">⚠️ Known Limitations</h3>
<p><strong>File System Features:</strong>
- ✅ File searching, directory traversal, and file filtering are fully supported via the <code>$file()</code> API in the scripting layer.
- ❌ These features are not built into the <code>.grep()</code> function itself, but are available for scripting flexible workflows.
- <strong>Design Note:</strong> This separation allows for more powerful and programmable file processing, at the cost of not having a single "one-liner" CLI for recursive search.</p>
<p><strong>Scripting Layer Issues:</strong>
- ⚠️ Unicode string functions (<code>len()</code>, <code>ord()</code>) count bytes not characters
- ⚠️ Null-data mode limited by string parser (<code>\x00</code> not converted)</p>
<h3 id="ripgrep-parity-status">✅ Ripgrep Parity Status</h3>
<p><strong>FULL PARITY ACHIEVED</strong> for all in-memory/streaming features:
- ✅ All core grep functionality
- ✅ All advanced features
- ✅ Complete Unicode support
- ✅ Performance optimizations
- ✅ Error handling
- ✅ Context merging and separators
- ✅ Comprehensive "o" option functionality</p>
<h3 id="recent-fixes-and-improvements-2024-12">Recent Fixes and Improvements (2024-12)</h3>
<p><strong>JSON Output Format:</strong>
- ✅ Fixed double-wrapping issue in JSON output
- ✅ Now returns valid JSON arrays consistently
- ✅ Proper handling of named groups and metadata
- ✅ Fixed empty pattern with <code>"j"</code>/<code>"oj"</code> options returning null instead of valid JSON array</p>
<p><strong>Zero-Length Matches:</strong>
- ✅ Fixed output of empty strings vs null values
- ✅ Proper handling of lookaround assertions and word boundaries
- ✅ Consistent behavior with ripgrep for zero-length matches</p>
<p><strong>PCRE2 Integration:</strong>
- ✅ Improved Unicode handling and advanced regex features
- ✅ Better support for Unicode properties and grapheme clusters
- ✅ Enhanced error handling for malformed patterns</p>
<p><strong>Context Features:</strong>
- ✅ Implemented proper <code>--</code> separator lines between context blocks
- ✅ Improved context merging for overlapping regions
- ✅ Better handling of edge cases (file boundaries, multiple matches)</p>
<p><strong>Output Options:</strong>
- ✅ Fixed T option for column number output (1-based positioning)
- ✅ Fixed L option for ANSI color codes
- ✅ Improved error handling for malformed patterns and edge cases</p>
<p><strong>Performance:</strong>
- ✅ Up to 9.44x speedup with 16 workers (verified in tests)
- ✅ Consistent results across all worker counts
- ✅ Robust edge case handling for worker counts</p>
<h3 id="comprehensive-testing-for-multiline-patterns-and-rare-pcre2-features-2024-12">Comprehensive Testing for Multiline Patterns and Rare PCRE2 Features (2024-12)</h3>
<p><strong>New Test Coverage:</strong>
- ✅ <strong>Multiline patterns</strong> with custom delimiters (<code>s</code> flag)
- ✅ <strong>Atomic groups</strong> (<code>(?&gt;...)</code>) with multi-character delimiters
- ✅ <strong>Possessive quantifiers</strong> (<code>*+</code>, <code>++</code>, <code>?+</code>) with custom delimiters
- ✅ <strong>Conditional patterns</strong> (<code>?(condition)...</code>) with edge cases
- ✅ <strong>Lookaround assertions</strong> with multi-character delimiters
- ✅ <strong>Unicode properties</strong> with custom delimiters
- ✅ <strong>Complex multiline patterns</strong> with context lines
- ✅ <strong>Edge cases</strong> with multi-character delimiters
- ✅ <strong>JSON output</strong> with custom delimiters
- ✅ <strong>Performance testing</strong> with large multi-character delimiters
- ✅ <strong>Rare PCRE2 features</strong> with Unicode grapheme clusters
- ✅ <strong>Delimiter removal verification</strong> for all scenarios</p>
<p><strong>Test File:</strong> <code>test/test_multiline_and_rare_pcre2.grc</code></p>
<p><strong>Key Improvements:</strong>
- ✅ <strong>Multi-character delimiter support</strong> - No longer assumes single-character delimiters
- ✅ <strong>Proper delimiter removal</strong> - All output strings are clean (no delimiter artifacts)
- ✅ <strong>Context line processing</strong> - Uses custom delimiters instead of hardcoded <code>\n</code>
- ✅ <strong>Comprehensive edge case coverage</strong> - Tests for all rare PCRE2 features
- ✅ <strong>Performance validation</strong> - Large inputs with complex delimiters
- ✅ <strong>Unicode integration</strong> - Advanced Unicode features with custom delimiters</p>
<p><strong>Example Test Cases:</strong>
<div class="highlight"><pre><span></span><code>/* Multiline pattern with custom delimiter */
&quot;start|||middle|||end&quot;.grep(&quot;start.*end&quot;, &quot;s&quot;, &quot;|||&quot;)
/* Result: [&quot;start|||middle|||end&quot;] (matches across delimiter) */

/* Atomic group with custom delimiter */
&quot;aaaa|bbbb|cccc&quot;.grep(&quot;(?&gt;a+)a&quot;, &quot;o&quot;, &quot;|&quot;)
/* Result: [] (atomic group prevents backtracking) */

/* Possessive quantifier with custom delimiter */
&quot;aaa|bbb|ccc&quot;.grep(&quot;a++&quot;, &quot;o&quot;, &quot;|&quot;)
/* Result: [&quot;aaa&quot;] (matches all a&#39;s greedily) */

/* Conditional pattern with custom delimiter */
&quot;abc123|def456&quot;.grep(&quot;(a)?(?(1)b|c)&quot;, &quot;o&quot;, &quot;|&quot;)
/* Result: [&quot;ab&quot;, &quot;c&quot;] (conditional branching) */
</code></pre></div></p>
<p><strong>Benefits:</strong>
- <strong>Robust delimiter handling</strong> - Supports any delimiter length or complexity
- <strong>Clean output</strong> - No delimiter artifacts in result strings
- <strong>Full PCRE2 compatibility</strong> - All advanced regex features work with custom delimiters
- <strong>Performance optimized</strong> - Efficient processing of multi-character delimiters
- <strong>Comprehensive testing</strong> - Edge cases and rare features thoroughly tested</p>
<h3 id="current-status-and-known-issues">Current Status and Known Issues</h3>
<p><strong>Working Features:</strong>
- ✅ All core functionality working correctly
- ✅ Full Unicode support with normalization and diacritic-insensitive matching
- ✅ Advanced regex features (atomic groups, lookarounds, possessive quantifiers)
- ✅ Comprehensive output formats (JSON, context, line numbers, etc.)
- ✅ Parallel processing with excellent performance scaling
- ✅ Python integration fully functional
- ✅ Ripgrep parity for all in-memory features</p>
<p><strong>Minor Issues:</strong>
- ⚠️ Empty patterns return <code>$SYSID</code> instead of <code>$ERR</code> (current behavior, not a bug)
- ⚠️ Some complex context combinations may not merge exactly as ripgrep does
- ⚠️ Some Unicode normalization scenarios may have edge cases</p>
<p><strong>Test Coverage:</strong>
- ✅ Comprehensive test suite covering all features
- ✅ Property-based testing for Unicode/PCRE2 edge cases
- ✅ Performance testing with large inputs
- ✅ Python integration testing
- ✅ Regression testing for all recent fixes</p>
<h3 id="advanced-context-examples">Advanced Context Examples</h3>
<div class="highlight"><pre><span></span><code>/* Context merging - overlapping regions are automatically merged */
input = &quot;a\nb\nc\nd\ne\nf&quot;;
input.grep(&quot;c|d&quot;, &quot;A1B1&quot;)
[&quot;b\n&quot;, &quot;c\n&quot;, &quot;d\n&quot;, &quot;e\n&quot;]  /* Overlapping context merged into single block */

/* Context separators between non-overlapping blocks */
input2 = &quot;a\nb\nc\nd\ne\nf\ng\nh\ni\nj&quot;;
input2.grep(&quot;c|i&quot;, &quot;A1B1&quot;)
[&quot;b\n&quot;, &quot;c\n&quot;, &quot;d\n&quot;, &quot;--\n&quot;, &quot;h\n&quot;, &quot;i\n&quot;, &quot;j\n&quot;]  /* -- separator between blocks */

/* Complex context with multiple options */
log_content.grep(&quot;error&quot;, &quot;A2B1io&quot;)  /* 2 lines after, 1 before, match-only, case-insensitive */
</code></pre></div>
<h3 id="advanced-unicode-o-option-examples">Advanced Unicode "o" Option Examples</h3>
<div class="highlight"><pre><span></span><code>/* Comprehensive Unicode character extraction */
&quot;éñü&quot;.grep(&quot;.&quot;, &quot;o&quot;)
[&quot;é&quot;, &quot;ñ&quot;, &quot;ü&quot;]  /* Perfect Unicode character extraction */

/* Unicode with normalization and &quot;o&quot; option */
&quot;café résumé&quot;.grep(&quot;\\X&quot;, &quot;oN&quot;)
[&quot;c&quot;, &quot;a&quot;, &quot;f&quot;, &quot;é&quot;, &quot; &quot;, &quot;r&quot;, &quot;é&quot;, &quot;s&quot;, &quot;u&quot;, &quot;m&quot;, &quot;é&quot;]  /* Normalized grapheme clusters */

/* Complex Unicode scenarios with &quot;o&quot; option */
&quot;👨‍👩‍👧‍👦&quot;.grep(&quot;\\X&quot;, &quot;o&quot;)
[&quot;👨‍👩‍👧‍👦&quot;]  /* Family emoji as single grapheme cluster */

/* Unicode properties with &quot;o&quot; option */
&quot;Hello 世界 123&quot;.grep(&quot;\\p{L}+&quot;, &quot;o&quot;)
[&quot;Hello&quot;, &quot;世界&quot;]  /* Unicode letters only */

/* Diacritic-insensitive with &quot;o&quot; option */
&quot;café résumé naïve&quot;.grep(&quot;cafe&quot;, &quot;od&quot;)
[&quot;café&quot;]  /* Diacritic-insensitive matching */

/* Case-insensitive Unicode with &quot;o&quot; option */
&quot;ÉÑÜ&quot;.grep(&quot;.&quot;, &quot;oi&quot;)
[&quot;É&quot;, &quot;Ñ&quot;, &quot;Ü&quot;]  /* Case-insensitive Unicode character extraction */
</code></pre></div>
<h1 id="option-flag-coverage-test-status-and-implementation-philosophy-living-status-section">Option Flag Coverage, Test Status, and Implementation Philosophy (Living Status Section)</h1>
<blockquote>
<p><strong>This section is a living document tracking the current state of Grapa grep option flag support, test/code path coverage, and design philosophy. Update this section as new combinations are implemented or tested, or as the philosophy evolves.</strong></p>
</blockquote>
<h2 id="testing-and-implementation-priorities">Testing and Implementation Priorities</h2>
<ol>
<li><strong>First Priority:</strong></li>
<li>Ensure there are tests for <strong>all valid combinations of options</strong>.</li>
<li>The code structure should cover every possible option combination, with minimal unique code paths (maximize code path sharing and composability).</li>
<li>
<p>This prevents the need for major refactoring as new features or edge cases are added.</p>
</li>
<li>
<p><strong>Second Priority:</strong></p>
</li>
<li>Once the above is complete, address <strong>edge cases</strong>.</li>
<li>Edge case handling must be implemented in a way that is compatible with all possible option combinations that may reach the relevant code path.</li>
<li>Edge cases are exceptions layered on top of the comprehensive option combination coverage.</li>
</ol>
<blockquote>
<p><strong>This approach ensures maintainability, extensibility, and robust architecture.</strong></p>
</blockquote>
<h2 id="coverage-matrix-option-combinations">Coverage Matrix: Option Combinations</h2>
<table>
<thead>
<tr>
<th>Option(s)</th>
<th>Description/Example</th>
<th>Status</th>
<th>Test File(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>o</td>
<td>Match-only</td>
<td>✅ Tested</td>
<td>test/grep/test_option_based_behavior.grc</td>
</tr>
<tr>
<td>f</td>
<td>Force full-segment</td>
<td>✅ Tested</td>
<td>test/grep/test_f_flag_combinations.grc</td>
</tr>
<tr>
<td>a</td>
<td>All-mode</td>
<td>✅ Tested</td>
<td>test/grep/test_comprehensive_grep_combinations.grc</td>
</tr>
<tr>
<td>s</td>
<td>Dot matches newline</td>
<td>✅ Tested</td>
<td>test/grep/test_multiline_and_rare_pcre2.grc</td>
</tr>
<tr>
<td>i</td>
<td>Case-insensitive</td>
<td>✅ Tested</td>
<td>test/grep/test_case_insensitive_unicode.grc</td>
</tr>
<tr>
<td>d</td>
<td>Diacritic-insensitive</td>
<td>✅ Tested</td>
<td>test/grep/test_option_combinations_advanced.grc</td>
</tr>
<tr>
<td>w</td>
<td>Word boundary</td>
<td>✅ Tested</td>
<td>test/grep/test_option_combinations_advanced.grc</td>
</tr>
<tr>
<td>l</td>
<td>Line number only output</td>
<td>✅ Tested</td>
<td>test/grep/test_basic_option_combinations.grc</td>
</tr>
<tr>
<td>u</td>
<td>Unique (deduplicate)</td>
<td>✅ Tested</td>
<td>test/grep/test_option_combinations_advanced.grc</td>
</tr>
<tr>
<td>g</td>
<td>Group results per line</td>
<td>✅ Tested</td>
<td>test/grep/test_option_combinations_advanced.grc</td>
</tr>
<tr>
<td>b</td>
<td>Output byte offset</td>
<td>✅ Tested</td>
<td>test/grep/test_edge_case_precedence.grc</td>
</tr>
<tr>
<td>j</td>
<td>JSON output</td>
<td>✅ Tested</td>
<td>test/grep/test_compositional_stress.grc</td>
</tr>
<tr>
<td>c</td>
<td>Count of matches</td>
<td>✅ Tested</td>
<td>test/grep/test_edge_case_precedence.grc</td>
</tr>
<tr>
<td>n</td>
<td>Prefix matches with line numbers</td>
<td>✅ Tested</td>
<td>test/grep/test_basic_option_combinations.grc</td>
</tr>
<tr>
<td>x</td>
<td>Exact line match</td>
<td>✅ Tested</td>
<td>test/grep/test_basic_option_combinations.grc</td>
</tr>
<tr>
<td>v</td>
<td>Invert match</td>
<td>✅ Tested</td>
<td>test/grep/test_compositional_stress.grc</td>
</tr>
<tr>
<td>N</td>
<td>Normalize to NFC</td>
<td>✅ Tested</td>
<td>test/grep/test_unicode_normalization.grc</td>
</tr>
<tr>
<td>z</td>
<td>Reserved/future</td>
<td>⚠️ Partial</td>
<td>test/grep/test_option_combinations_advanced.grc</td>
</tr>
<tr>
<td>T</td>
<td>Output column numbers</td>
<td>✅ Tested</td>
<td>test/grep/column_test.grc</td>
</tr>
<tr>
<td>L</td>
<td>Color output (ANSI)</td>
<td>✅ Tested</td>
<td>test/grep/test_edge_case_precedence.grc</td>
</tr>
<tr>
<td>A<n>, B<n>, C<n></td>
<td>Context lines</td>
<td>✅ Tested</td>
<td>test/grep/test_context_lines.grc</td>
</tr>
<tr>
<td>(pairs/triples)</td>
<td>All meaningful pairs/triples</td>
<td>✅ Tested</td>
<td>test/grep/test_option_combinations_matrix.grc</td>
</tr>
<tr>
<td>(higher-order)</td>
<td>Quadruple+ combinations</td>
<td>✅ Tested</td>
<td>test/grep/test_option_combinations_higher_order.grc</td>
</tr>
<tr>
<td>(parallel)</td>
<td>All above with parallel/worker</td>
<td>✅ Tested</td>
<td>test/grep/test_option_combinations_parallel.grc</td>
</tr>
</tbody>
</table>
<p><strong>Legend:</strong>
- ✅ = Fully tested and implemented
- ⚠️ = Partially tested, planned, or reserved</p>
<h3 id="status">Status</h3>
<ul>
<li><strong>All valid single, pair, triple, higher-order, and parallel option combinations are now systematically covered by dedicated test files.</strong></li>
<li>The next step is to proceed with edge case coverage, ensuring all edge case handling is compatible with the full option matrix.</li>
</ul>
<h3 id="edge-case-handling">Edge Case Handling</h3>
<ul>
<li>Edge case tests will be added <strong>after</strong> the main option matrix is complete.</li>
<li>Edge case handling must be compatible with all option combinations that may reach the relevant code path.</li>
<li>Edge case test files will be clearly marked and cross-referenced here.</li>
</ul>
<blockquote>
<p><strong>This living section ensures that the current state of Grapa grep option support, test coverage, and design philosophy is always visible and up to date.</strong></p>
</blockquote>
<h2 id="rules-for-authoring-grc-files-on-windows-living-reference">Rules for Authoring .grc Files on Windows (Living Reference)</h2>
<blockquote>
<p><strong>This section collects essential rules and conventions for writing or modifying Grapa .grc files on Windows. Follow these to ensure compatibility, correct syntax, and maintainability. Update as new rules are discovered.</strong></p>
</blockquote>
<ul>
<li><strong>Comments:</strong></li>
<li>Do <strong>not</strong> use <code>//</code> for comments. Use block comments for all comments (do not use //). Block comments should be written as in this header. Do not use the literal /<em> ... </em>/ inside a block comment, as Grapa does not support nested block comments.</li>
<li><strong>Echo/Print:</strong></li>
<li>Do <strong>not</strong> use <code>print</code> or <code>echo()</code> as a bare function.</li>
<li>Always use the method form: <code>"string".echo();</code> or <code>(str1+str2).echo();</code>.</li>
<li><strong>Statement Endings:</strong></li>
<li>End every command or statement with a <code>;</code> character.</li>
<li><strong>Loops:</strong></li>
<li>Use <code>while</code> loops instead of <code>for</code> loops (Grapa does not support <code>for</code>).</li>
<li><strong>String Concatenation:</strong></li>
<li>When concatenating strings, wrap the entire expression in parentheses: <code>(str1+str2).echo();</code>.</li>
<li><strong>Array Access:</strong></li>
<li>Access arrays with <code>.get(index)</code>, not with square brackets: <code>arr.get(0);</code>.</li>
<li><strong>Object Property Access:</strong></li>
<li>Access object properties with <code>.get("key")</code>, not with square brackets: <code>obj.get("key");</code>.</li>
<li><strong>General:</strong></li>
<li>Validate syntax against known-good .grc files before adding new tests or code.</li>
<li>Prefer simple, explicit constructs for maximum compatibility.</li>
</ul>
<blockquote>
<p><strong>Update this section as new rules or best practices are discovered.</strong></p>
</blockquote>
<ul>
<li><strong>Running .grc Files on Windows:</strong></li>
<li>To run a .grc file, use the following command in PowerShell or Command Prompt:<ul>
<li><code>.\grep.exe -q -cfile path/file.grc</code></li>
</ul>
</li>
<li>
<p>This suppresses the version header (<code>-q</code>) and runs the specified .grc file (<code>-cfile</code>).</p>
</li>
<li>
<p><strong>Array and List Access:</strong></p>
</li>
<li>Arrays (type $ARRAY) and lists (type $LIST) are accessed with <code>[index]</code> syntax, not <code>.get(index)</code>.</li>
<li>Example:
    /<em>
    ar = [1,2,3];
    ar[1]; /</em> returns 2 <em>/
    ar = {"a":11,"b":22,"c":33};
    ar[1]; /</em> returns 22 <em>/
    ar["b"]; /</em> returns 22 <em>/
    </em>/</li>
<li>
<p>Use <code>.get("key")</code> for object property access, not for arrays/lists.</p>
</li>
<li>
<p><strong>String Literals and Quotes:</strong></p>
</li>
<li>If your string contains double quotes (<code>"</code>), use single quotes (<code>'</code>) for the outer string, or escape the inner double quotes as (<code>\"</code>).</li>
<li>If your string contains single quotes (<code>'</code>), use double quotes (<code>"</code>) for the outer string, or escape the inner single quotes as (<code>\'</code>).</li>
<li><strong>Examples:</strong><ul>
<li><code>'Expected: ["", "a", "", "b", ""]\n'.echo();</code>  /<em> single quotes outside, double quotes inside </em>/</li>
<li><code>(\"Expected: [\\\"\\\", \\\"a\\\", \\\"\\\", \\\"b\\\", \\\"\\\"]\\n\").echo();</code>  /<em> double quotes outside, inner double quotes escaped </em>/</li>
</ul>
</li>
</ul>
<h2 id="file-system-integration-for-grep-utilities-grapa-scripting-layer">File System Integration for Grep Utilities (Grapa Scripting Layer)</h2>
<ul>
<li>Use <code>$file().ls()</code> to enumerate files in a directory.</li>
<li>Use <code>$file().info("path")</code> to check file type/existence.</li>
<li>Use <code>$file().get("path")</code> to read file contents. <strong>Note:</strong> <code>.get()</code> returns binary data (type <code>$BIN</code>); use <code>.str()</code> to convert to string format: <code>$file().get("file").str()</code>.</li>
<li>Use <code>$file().set("path", value)</code> to write file contents.</li>
<li>These commands provide all file system operations needed for scripting a command-line grep utility in Grapa.</li>
</ul>
<p><strong>Example workflow:</strong>
<div class="highlight"><pre><span></span><code>files = $file().ls();
i = 0;
while (i &lt; files.len()) {
    f = files[i];
    info = $file().info(f[&quot;$KEY&quot;]);
    if (info[&quot;$TYPE&quot;] == &quot;FILE&quot;) {
        content = $file().get(f[&quot;$KEY&quot;]).str();
        matches = content.grep(&quot;pattern&quot;, &quot;o&quot;);
        /* process matches... */
    }
    i = i + 1;
}
</code></pre></div>
- <strong>Note:</strong> File handling (enumeration, reading, writing) is performed in the scripting layer, not inside the <code>.grep()</code> function itself. This separation allows for flexible, programmable workflows.</p>
<h2 id="production-readiness-edge-case-coverage-2024-06-update">Production-Readiness Edge Case Coverage (2024-06 Update)</h2>
<blockquote>
<p><strong>The following edge cases are now covered by dedicated test files to ensure Grapa grep is suitable for mission-critical production use and ripgrep parity.</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>Edge Case Category</th>
<th>Description/Examples</th>
<th>Test File(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pathological Patterns</td>
<td>Catastrophic backtracking, large alternations, deep nesting</td>
<td>test/grep/test_pathological_patterns.grc</td>
</tr>
<tr>
<td>Malformed/Invalid Unicode</td>
<td>Invalid UTF-8, unpaired surrogates, noncharacters, BOM</td>
<td>test/grep/test_malformed_unicode.grc</td>
</tr>
<tr>
<td>Ultra-Large Lines</td>
<td>Single line &gt;1MB, only delimiters, no newline at EOF</td>
<td>test/grep/test_ultra_large_lines.grc</td>
</tr>
<tr>
<td>(All other edge cases)</td>
<td>Zero-length, Unicode, null bytes, context, overlap, etc.</td>
<td>See other test/grep/edge_case_*.grc files</td>
</tr>
</tbody>
</table>
<ul>
<li>These tests are critical for production reliability and ripgrep parity.</li>
<li>If any test causes a hang, crash, or error, document and update implementation.</li>
<li>See each test file for detailed scenarios and expected results.</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.action.edit", "content.action.view", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>