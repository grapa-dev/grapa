
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://grapa-dev.github.io/grapa/docs/TESTING/">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Testing Grapa Scripts - Grapa Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#testing-grapa-scripts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Grapa Documentation" class="md-header__button md-logo" aria-label="Grapa Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Grapa Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Testing Grapa Scripts
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../GETTING_STARTED/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../CLI_QUICKSTART/" class="md-tabs__link">
        
  
  
    
  
  CLI Quickstart

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../python_integration/" class="md-tabs__link">
        
  
  
    
  
  Python Quickstart

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../API_REFERENCE/" class="md-tabs__link">
        
  
  
    
  
  API Reference

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../GREP/" class="md-tabs__link">
        
  
  
    
  
  Grep Documentation

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../migrations/PYTHON_TO_GRAPA_MIGRATION/" class="md-tabs__link">
          
  
  
  Migration Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../use_cases/" class="md-tabs__link">
          
  
  
  Use Cases

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../EXAMPLES/" class="md-tabs__link">
        
  
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../syntax/basic_syntax/" class="md-tabs__link">
          
  
  
  Syntax

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../TROUBLESHOOTING/" class="md-tabs__link">
        
  
  
    
  
  Troubleshooting

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Grapa Documentation" class="md-nav__button md-logo" aria-label="Grapa Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Grapa Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../GETTING_STARTED/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../CLI_QUICKSTART/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../python_integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../API_REFERENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../GREP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grep Documentation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Migration Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Migration Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrations/PYTHON_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrations/JS_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JavaScript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrations/RUST_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rust
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrations/TYPESCRIPT_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TypeScript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrations/GO_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Go
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrations/RUBY_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ruby
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrations/KOTLIN_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kotlin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrations/SWIFT_TO_GRAPA_MIGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Swift
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Use Cases
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Use Cases
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/etl_data_engineering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ETL / Data Engineering
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/compiler_bnf_learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compiler/BNF Learning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/high_precision_math/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    High-Precision Math
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/parallel_concurrent_programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parallel Programming
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/web_data_scraping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web Scraping
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/database_file_system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database & File System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/education_prototyping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Education & Prototyping
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/cryptography/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cryptography
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../EXAMPLES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Syntax
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Syntax
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../syntax/basic_syntax/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Syntax
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../syntax/operator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../syntax/precedence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Precedence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../syntax/grammar_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grammar Design
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../TROUBLESHOOTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syntax-reminders" class="md-nav__link">
    <span class="md-ellipsis">
      Syntax Reminders
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Testing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-assertion-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Assertion Testing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-with-multiple-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Testing with Multiple Cases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-string-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Testing String Operations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling Tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Handling Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-error-conditions" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Error Conditions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-object-property-access" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Object Property Access
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-structure-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Data Structure Testing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Structure Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-array-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Array Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-array-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Array Filtering
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-array-reduction" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Array Reduction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-io-testing" class="md-nav__link">
    <span class="md-ellipsis">
      File I/O Testing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File I/O Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-file-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Testing File Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-json-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing JSON Processing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parallel-processing-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Parallel Processing Tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parallel Processing Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-parallel-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Parallel Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-thread-safety" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Thread Safety
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pattern-matching-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Pattern Matching Tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pattern Matching Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-grep-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Grep Patterns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-complex-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Complex Patterns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-unicode-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Unicode Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Integration Testing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integration Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-complete-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Complete Workflows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-data-validation-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Data Validation Pipeline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-use-descriptive-test-names" class="md-nav__link">
    <span class="md-ellipsis">
      1. Use Descriptive Test Names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-test-edge-cases" class="md-nav__link">
    <span class="md-ellipsis">
      2. Test Edge Cases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-clean-up-test-data" class="md-nav__link">
    <span class="md-ellipsis">
      3. Clean Up Test Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-use-consistent-assertion-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      4. Use Consistent Assertion Patterns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-test-both-success-and-failure-paths" class="md-nav__link">
    <span class="md-ellipsis">
      5. Test Both Success and Failure Paths
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-use-parallel-processing-carefully" class="md-nav__link">
    <span class="md-ellipsis">
      6. Use Parallel Processing Carefully
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thread-safety-and-parallelism" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Safety and Parallelism
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <nav class="md-tags" >
    
      
      
      
        <span class="md-tag">highlevel</span>
      
    
      
      
      
        <span class="md-tag">testing</span>
      
    
      
      
      
        <span class="md-tag">user</span>
      
    
  </nav>



<h1 id="testing-grapa-scripts">Testing Grapa Scripts</h1>
<blockquote>
<p><strong>For Users:</strong> Learn how to test your Grapa scripts effectively using Grapa's built-in capabilities.</p>
<p><strong>See Also:</strong>
- <a href="../GETTING_STARTED/">Getting Started</a>
- <a href="../EXAMPLES/">Examples</a>
- <a href="../API_REFERENCE/">API Reference</a></p>
</blockquote>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#basic-testing">Basic Testing</a></li>
<li><a href="#error-handling-tests">Error Handling Tests</a></li>
<li><a href="#data-structure-testing">Data Structure Testing</a></li>
<li><a href="#file-io-testing">File I/O Testing</a></li>
<li><a href="#parallel-processing-tests">Parallel Processing Tests</a></li>
<li><a href="#pattern-matching-tests">Pattern Matching Tests</a></li>
<li><a href="#integration-testing">Integration Testing</a></li>
<li><a href="#best-practices">Best Practices</a></li>
</ul>
<h2 id="syntax-reminders">Syntax Reminders</h2>
<ul>
<li>Every statement and every block (including after closing braces) must end with a semicolon (<code>;</code>).</li>
<li>Use block comments (<code>/* ... */</code>), not line comments (<code>// ...</code>).</li>
<li>To append to arrays, use the <code>+=</code> operator (not <code>.push()</code> or <code>.append()</code>).</li>
<li>Use <code>[]</code> for list/array access, not <code>.get()</code> (which is for objects/tables).</li>
<li>Check for <code>$ERR</code> when accessing keys or attributes that may not exist.</li>
<li>See <a href="../syntax/basic_syntax/">Syntax Quick Reference</a> for more.</li>
</ul>
<hr />
<h2 id="basic-testing">Basic Testing</h2>
<h3 id="simple-assertion-testing">Simple Assertion Testing</h3>
<div class="highlight"><pre><span></span><code>/* Test basic function */
test_function = op(x) { x * 2; };
result = test_function(5);
if (result != 10) {
    (&quot;Test failed: expected 10, got &quot; + result.str()).echo();
} else {
    &quot;Test passed: function correctly doubles input&quot;.echo();
};
</code></pre></div>
<h3 id="testing-with-multiple-cases">Testing with Multiple Cases</h3>
<div class="highlight"><pre><span></span><code>/* Test function with multiple inputs */
test_cases = [0, 1, 5, 10, -3];
expected_results = [0, 2, 10, 20, -6];
i = 0;
while (i &lt; test_cases.len()) {
    result = test_function(test_cases[i]);
    expected = expected_results[i];
    if (result != expected) {
        (&quot;Test failed for input &quot; + test_cases[i].str() + &quot;: expected &quot; + expected.str() + &quot;, got &quot; + result.str()).echo();
    } else {
        (&quot;Test passed for input &quot; + test_cases[i].str()).echo();
    };
    i += 1;
};
</code></pre></div>
<h3 id="testing-string-operations">Testing String Operations</h3>
<div class="highlight"><pre><span></span><code>/* Test string operations */
test_string = &quot;  Hello, World!  &quot;;
trimmed = test_string.trim();
upper = trimmed.upper();

if (trimmed != &quot;Hello, World!&quot;) {
    &quot;String trim test failed&quot;.echo();
} else {
    &quot;String trim test passed&quot;.echo();
};

if (upper != &quot;HELLO, WORLD!&quot;) {
    &quot;String upper test failed&quot;.echo();
} else {
    &quot;String upper test passed&quot;.echo();
};
</code></pre></div>
<h2 id="error-handling-tests">Error Handling Tests</h2>
<h3 id="testing-error-conditions">Testing Error Conditions</h3>
<div class="highlight"><pre><span></span><code>/* Test division by zero handling */
test_division = op(a, b) {
    if (b == 0) {
        $ERR;
    } else {
        a / b;
    };
};

/* Test error case */
result = test_division(10, 0);
if (result.type() == $ERR) {
    &quot;Division by zero correctly caught&quot;.echo();
} else {
    &quot;Division by zero test failed&quot;.echo();
};

/* Test success case */
result = test_division(10, 2);
if (result.type() != $ERR &amp;&amp; result == 5) {
    &quot;Division test passed&quot;.echo();
} else {
    &quot;Division test failed&quot;.echo();
};
</code></pre></div>
<h3 id="testing-object-property-access">Testing Object Property Access</h3>
<div class="highlight"><pre><span></span><code>/* Test safe object property access */
test_obj = {&quot;name&quot;: &quot;Alice&quot;, &quot;age&quot;: 30};

/* Test existing property */
name = test_obj.get(&quot;name&quot;);
if (name != &quot;Alice&quot;) {
    &quot;Object property test failed&quot;.echo();
} else {
    &quot;Object property test passed&quot;.echo();
};

/* Test missing property */
missing = test_obj.get(&quot;nonexistent&quot;);
if (missing.type() == $ERR) {
    &quot;Missing property correctly returns $ERR&quot;.echo();
} else {
    &quot;Missing property test failed&quot;.echo();
};
</code></pre></div>
<h2 id="data-structure-testing">Data Structure Testing</h2>
<h3 id="testing-array-operations">Testing Array Operations</h3>
<div class="highlight"><pre><span></span><code>/* Test array operations */
test_array = [1, 2, 3, 4, 5];
doubled = test_array.map(op(x) { x * 2; });
expected = [2, 4, 6, 8, 10];

/* Compare arrays */
if (doubled.len() != expected.len()) {
    &quot;Array length test failed&quot;.echo();
} else {
    &quot;Array length test passed&quot;.echo();
};

/* Compare each element */
i = 0;
while (i &lt; doubled.len()) {
    if (doubled[i] != expected[i]) {
        (&quot;Array element test failed at index &quot; + i.str() + &quot;: expected &quot; + expected[i].str() + &quot;, got &quot; + doubled[i].str()).echo();
    } else {
        (&quot;Array element test passed at index &quot; + i.str()).echo();
    };
    i = i + 1;
};
</code></pre></div>
<h3 id="testing-array-filtering">Testing Array Filtering</h3>
<div class="highlight"><pre><span></span><code>/* Test array filtering */
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
evens = numbers.filter(op(x) { x % 2 == 0; });
expected_evens = [2, 4, 6, 8, 10];

if (evens.len() != expected_evens.len()) {
    &quot;Filter length test failed&quot;.echo();
} else {
    &quot;Filter length test passed&quot;.echo();
};

/* Sort for comparison (order may vary with parallel processing) */
evens_sorted = evens.sort();
expected_sorted = expected_evens.sort();

if (evens_sorted.str() == expected_sorted.str()) {
    &quot;Filter test passed&quot;.echo();
} else {
    &quot;Filter test failed&quot;.echo();
};
</code></pre></div>
<h3 id="testing-array-reduction">Testing Array Reduction</h3>
<div class="highlight"><pre><span></span><code>/* Test array reduction */
numbers = [1, 2, 3, 4, 5];
sum = numbers.reduce(op(acc, x) { acc + x; }, 0);
expected_sum = 15;

if (sum == expected_sum) {
    &quot;Reduce test passed&quot;.echo();
} else {
    (&quot;Reduce test failed: expected &quot; + expected_sum.str() + &quot;, got &quot; + sum.str()).echo();
};
</code></pre></div>
<h2 id="file-io-testing">File I/O Testing</h2>
<h3 id="testing-file-operations">Testing File Operations</h3>
<div class="highlight"><pre><span></span><code>/* Test file operations */
test_file = &quot;test_data.txt&quot;;
test_content = &quot;Hello, Grapa!&quot;;

/* Write test data */
file_set(test_file, test_content);

/* Read and verify */
read_content = file_get(test_file);
if (read_content != test_content) {
    &quot;File content test failed&quot;.echo();
} else {
    &quot;File content test passed&quot;.echo();
};

/* Test file listing */
files = file_ls(&quot;.&quot;);
test_file_found = false;
i = 0;
while (i &lt; files.len()) {
    if (files[i].name == test_file) {
        test_file_found = true;
    };
    i = i + 1;
};

if (test_file_found) {
    &quot;File listing test passed&quot;.echo();
} else {
    &quot;File listing test failed&quot;.echo();
};

/* Cleanup */
file_set(test_file, &quot;&quot;);  /* Clear file */
</code></pre></div>
<h3 id="testing-json-processing">Testing JSON Processing</h3>
<div class="highlight"><pre><span></span><code>/* Test JSON parsing and processing */
json_text = &#39;{&quot;name&quot;: &quot;Alice&quot;, &quot;age&quot;: 30, &quot;active&quot;: true}&#39;;
parsed = json_text.json();

/* Test object access */
name = parsed.get(&quot;name&quot;);
age = parsed.get(&quot;age&quot;);
active = parsed.get(&quot;active&quot;);

if (name == &quot;Alice&quot; &amp;&amp; age == 30 &amp;&amp; active == true) {
    &quot;JSON parsing test passed&quot;.echo();
} else {
    &quot;JSON parsing test failed&quot;.echo();
};

/* Test missing key */
missing = parsed.get(&quot;nonexistent&quot;);
if (missing.type() == $ERR) {
    &quot;JSON missing key test passed&quot;.echo();
} else {
    &quot;JSON missing key test failed&quot;.echo();
};
</code></pre></div>
<h2 id="parallel-processing-tests">Parallel Processing Tests</h2>
<h3 id="testing-parallel-operations">Testing Parallel Operations</h3>
<div class="highlight"><pre><span></span><code>/* Test parallel operations */
test_data = (1000).range(0, 1);  /* Generate 0-999 */
expected_sum = test_data.reduce(op(acc, x) { acc + x; }, 0);

/* Test parallel sum with limited threads */
/* 4 threads */
parallel_sum = test_data.reduce(op(acc, x) { acc + x; }, 0, 4);

if (parallel_sum == expected_sum) {
    &quot;Parallel sum test passed&quot;.echo();
} else {
    (&quot;Parallel sum test failed: expected &quot; + expected_sum.str() + &quot;, got &quot; + parallel_sum.str()).echo();
};

/* Test parallel mapping */
/* 4 threads */
doubled = test_data.map(op(x) { x * 2; }, 4);
/* Sequential for comparison */
expected_doubled = test_data.map(op(x) { x * 2; });

/* Sort for comparison (parallel order may vary) */
doubled_sorted = doubled.sort();
expected_sorted = expected_doubled.sort();

if (doubled_sorted.str() == expected_sorted.str()) {
    &quot;Parallel map test passed&quot;.echo();
} else {
    &quot;Parallel map test failed&quot;.echo();
};
</code></pre></div>
<h3 id="testing-thread-safety">Testing Thread Safety</h3>
<div class="highlight"><pre><span></span><code>/* Test thread safety with shared data */
shared_counter = 0;
lock_obj = $thread();

/* Create multiple threads that increment counter */
increment_worker = op() {
    lock_obj.lock();
    shared_counter = shared_counter + 1;
    lock_obj.unlock();
};

/* Run multiple increments */
i = 0;
while (i &lt; 100) {
    increment_worker();
    i = i + 1;
};

if (shared_counter == 100) {
    &quot;Thread safety test passed&quot;.echo();
} else {
    (&quot;Thread safety test failed: expected 100, got &quot; + shared_counter.str()).echo();
};
</code></pre></div>
<h2 id="pattern-matching-tests">Pattern Matching Tests</h2>
<h3 id="testing-grep-patterns">Testing Grep Patterns</h3>
<div class="highlight"><pre><span></span><code>/* Test basic pattern matching */
test_text = &quot;Hello world\nGoodbye world\nHello again&quot;;
matches = test_text.grep(&quot;Hello&quot;, &quot;o&quot;);

expected_matches = [&quot;Hello&quot;, &quot;Hello&quot;];
if (matches.len() != expected_matches.len()) {
    &quot;Grep match count test failed&quot;.echo();
} else {
    &quot;Grep match count test passed&quot;.echo();
};

/* Test case-insensitive matching */
case_matches = test_text.grep(&quot;hello&quot;, &quot;oi&quot;);
if (case_matches.len() == 2) {
    &quot;Case-insensitive grep test passed&quot;.echo();
} else {
    &quot;Case-insensitive grep test failed&quot;.echo();
};

/* Test Unicode case folding */
turkish_text = &quot;ƒ∞stanbul ƒ±stanbul&quot;;
turkish_matches = turkish_text.grep(&quot;istanbul&quot;, &quot;i&quot;);
if (turkish_matches.len() == 1) {
    &quot;Turkish I case folding test passed&quot;.echo();
} else {
    &quot;Turkish I case folding test failed&quot;.echo();
};

/* Test German sharp S case folding */
german_text = &quot;Stra√üe&quot;;
german_matches = german_text.grep(&quot;strasse&quot;, &quot;i&quot;);
if (german_matches.len() == 1) {
    &quot;German sharp S case folding test passed&quot;.echo();
} else {
    &quot;German sharp S case folding test failed&quot;.echo();
};

/* Test Greek final sigma case folding */
greek_text = &quot;Œ≥œÅŒ¨ŒºŒºŒ±&quot;;
greek_matches = greek_text.grep(&quot;ŒìŒ°ŒëŒúŒúŒë&quot;, &quot;i&quot;);
if (greek_matches.len() == 1) {
    &quot;Greek final sigma case folding test passed&quot;.echo();
} else {
    &quot;Greek final sigma case folding test failed&quot;.echo();
};
</code></pre></div>
<h3 id="testing-complex-patterns">Testing Complex Patterns</h3>
<div class="highlight"><pre><span></span><code>/* Test complex regex patterns */
test_text = &quot;abc123\ndef456\nghi789&quot;;
number_matches = test_text.grep(&quot;[0-9]+&quot;, &quot;o&quot;);

if (number_matches.len() == 3) {
    &quot;Number pattern test passed&quot;.echo();
} else {
    &quot;Number pattern test failed&quot;.echo();
};

/* Test word boundaries */
word_text = &quot;hello world hello123 hello_test&quot;;
word_matches = word_text.grep(&quot;hello&quot;, &quot;wo&quot;);

if (word_matches.len() == 2) {
    &quot;Word boundary test passed&quot;.echo();
} else {
    &quot;Word boundary test failed&quot;.echo();
};
</code></pre></div>
<h3 id="testing-unicode-patterns">Testing Unicode Patterns</h3>
<div class="highlight"><pre><span></span><code>/* Test Unicode pattern matching */
unicode_text = &quot;caf√© r√©sum√© na√Øve&quot;;
unicode_matches = unicode_text.grep(&quot;√©&quot;, &quot;o&quot;);

if (unicode_matches.len() == 3) {
    &quot;Unicode pattern test passed&quot;.echo();
} else {
    &quot;Unicode pattern test failed&quot;.echo();
};

/* Test grapheme clusters */
emoji_text = &quot;Hello üë®‚Äçüë©‚Äçüëß‚Äçüë¶ World&quot;;
grapheme_matches = emoji_text.grep(&quot;\\X&quot;, &quot;o&quot;);

if (grapheme_matches.len() &gt; 0) {
    &quot;Grapheme cluster test passed&quot;.echo();
} else {
    &quot;Grapheme cluster test failed&quot;.echo();
};
</code></pre></div>
<h2 id="integration-testing">Integration Testing</h2>
<h3 id="testing-complete-workflows">Testing Complete Workflows</h3>
<div class="highlight"><pre><span></span><code>/* Test complete ETL workflow */
test_etl_workflow = op() {
    /* Setup test data */
    test_data = [{&quot;name&quot;: &quot;Alice&quot;, &quot;age&quot;: 30}, {&quot;name&quot;: &quot;Bob&quot;, &quot;age&quot;: 25}];

    /* Transform data */
    processed = test_data.map(op(record) {
        {&quot;name&quot;: record.get(&quot;name&quot;).upper(), &quot;age&quot;: record.get(&quot;age&quot;)};
    });

    /* Verify results */
    if (processed.len() != 2) {
        &quot;ETL workflow test failed: expected 2 records&quot;.echo();
        return false;
    };

    if (processed[0].get(&quot;name&quot;) != &quot;ALICE&quot;) {
        &quot;ETL workflow test failed: name not uppercased&quot;.echo();
        return false;
    };

    if (processed[1].get(&quot;name&quot;) != &quot;BOB&quot;) {
        &quot;ETL workflow test failed: second name not uppercased&quot;.echo();
        return false;
    };

    &quot;ETL workflow test passed&quot;.echo();
    return true;
};

test_etl_workflow();
</code></pre></div>
<h3 id="testing-data-validation-pipeline">Testing Data Validation Pipeline</h3>
<div class="highlight"><pre><span></span><code>/* Test data validation pipeline */
test_validation_pipeline = op() {
    /* Define validation rules */
    rules = {
        &quot;email&quot;: {&quot;pattern&quot;: &quot;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$&quot;},
        &quot;age&quot;: {&quot;min&quot;: 0, &quot;max&quot;: 150},
        &quot;salary&quot;: {&quot;min&quot;: 0, &quot;max&quot;: 1000000}
    };

    /* Test data */
    test_records = [
        {&quot;email&quot;: &quot;alice@example.com&quot;, &quot;age&quot;: 30, &quot;salary&quot;: 50000},
        {&quot;email&quot;: &quot;invalid-email&quot;, &quot;age&quot;: -5, &quot;salary&quot;: 2000000},
        {&quot;email&quot;: &quot;bob@test.org&quot;, &quot;age&quot;: 25, &quot;salary&quot;: 75000}
    ];

    /* Validate function */
    validate_record = op(record, rules) {
        errors = [];

        /* Check email pattern */
        if (!record.get(&quot;email&quot;).grep(rules.get(&quot;email&quot;).get(&quot;pattern&quot;), &quot;o&quot;).len() &gt; 0) {
            errors += &quot;Invalid email format&quot;;
        };

        /* Check age range */
        age = record.get(&quot;age&quot;);
        if (age &lt; rules.get(&quot;age&quot;).get(&quot;min&quot;) || age &gt; rules.get(&quot;age&quot;).get(&quot;max&quot;)) {
            errors += &quot;Age out of range&quot;;
        };

        /* Check salary range */
        salary = record.get(&quot;salary&quot;);
        if (salary &lt; rules.get(&quot;salary&quot;).get(&quot;min&quot;) || salary &gt; rules.get(&quot;salary&quot;).get(&quot;max&quot;)) {
            errors += &quot;Salary out of range&quot;;
        };

        {&quot;record&quot;: record, &quot;errors&quot;: errors, &quot;valid&quot;: errors.len() == 0};
    };

    /* Process validation results */
    results = test_records.map(op(record) { validate_record(record, rules); });
    valid_records = results.filter(op(result) { result.get(&quot;valid&quot;); });
    invalid_records = results.filter(op(result) { !result.get(&quot;valid&quot;); });

    /* Verify expected results */
    if (valid_records.len() == 2 &amp;&amp; invalid_records.len() == 1) {
        &quot;Validation pipeline test passed&quot;.echo();
        return true;
    } else {
        &quot;Validation pipeline test failed&quot;.echo();
        return false;
    };
};

test_validation_pipeline();
</code></pre></div>
<h2 id="best-practices">Best Practices</h2>
<h3 id="1-use-descriptive-test-names">1. Use Descriptive Test Names</h3>
<div class="highlight"><pre><span></span><code>/* Good: Descriptive test name */
test_array_doubling_function = op() {
    /* Test that array doubling function works correctly */
    test_data = [1, 2, 3];
    result = test_data.map(op(x) { x * 2; });
    expected = [2, 4, 6];

    if (result.str() == expected.str()) {
        &quot;Array doubling test passed&quot;.echo();
    } else {
        &quot;Array doubling test failed&quot;.echo();
    };
};
</code></pre></div>
<h3 id="2-test-edge-cases">2. Test Edge Cases</h3>
<div class="highlight"><pre><span></span><code>/* Test edge cases */
test_edge_cases = op() {
    /* Test empty array */
    empty_result = [].map(op(x) { x * 2; });
    if (empty_result.len() == 0) {
        &quot;Empty array test passed&quot;.echo();
    } else {
        &quot;Empty array test failed&quot;.echo();
    };

    /* Test single element */
    single_result = [5].map(op(x) { x * 2; });
    if (single_result[0] == 10) {
        &quot;Single element test passed&quot;.echo();
    } else {
        &quot;Single element test failed&quot;.echo();
    };

    /* Test negative numbers */
    negative_result = [-1, -2, -3].map(op(x) { x * 2; });
    if (negative_result.str() == &quot;[-2,-4,-6]&quot;) {
        &quot;Negative numbers test passed&quot;.echo();
    } else {
        &quot;Negative numbers test failed&quot;.echo();
    };
};
</code></pre></div>
<h3 id="3-clean-up-test-data">3. Clean Up Test Data</h3>
<div class="highlight"><pre><span></span><code>/* Always clean up test files */
test_with_cleanup = op() {
    test_file = &quot;temp_test.txt&quot;;

    /* Run test */
    file_set(test_file, &quot;test data&quot;);
    content = file_get(test_file);

    if (content == &quot;test data&quot;) {
        &quot;File test passed&quot;.echo();
    } else {
        &quot;File test failed&quot;.echo();
    };

    /* Clean up */
    file_set(test_file, &quot;&quot;);
    &quot;Test cleanup completed&quot;.echo();
};
</code></pre></div>
<h3 id="4-use-consistent-assertion-patterns">4. Use Consistent Assertion Patterns</h3>
<div class="highlight"><pre><span></span><code>/* Create reusable assertion functions */
assert_equal = op(actual, expected, message) {
    if (actual == expected) {
        (&quot;‚úì &quot; + message + &quot; passed&quot;).echo();
        return true;
    } else {
        (&quot;‚úó &quot; + message + &quot; failed: expected &quot; + expected.str() + &quot;, got &quot; + actual.str()).echo();
        return false;
    };
};

assert_array_equal = op(actual, expected, message) {
    if (actual.len() != expected.len()) {
        (&quot;‚úó &quot; + message + &quot; failed: length mismatch&quot;).echo();
        return false;
    };

    i = 0;
    while (i &lt; actual.len()) {
        if (actual[i] != expected[i]) {
            (&quot;‚úó &quot; + message + &quot; failed at index &quot; + i.str()).echo();
            return false;
        };
        i = i + 1;
    };

    (&quot;‚úì &quot; + message + &quot; passed&quot;).echo();
    return true;
};

/* Use assertions in tests */
test_with_assertions = op() {
    result = 5 * 2;
    assert_equal(result, 10, &quot;Multiplication test&quot;);

    array_result = [1, 2, 3].map(op(x) { x * 2; });
    assert_array_equal(array_result, [2, 4, 6], &quot;Array mapping test&quot;);
};
</code></pre></div>
<h3 id="5-test-both-success-and-failure-paths">5. Test Both Success and Failure Paths</h3>
<div class="highlight"><pre><span></span><code>/* Test both success and failure scenarios */
test_comprehensive = op() {
    /* Test success case */
    success_result = test_function(5);
    if (success_result == 10) {
        &quot;Success case test passed&quot;.echo();
    } else {
        &quot;Success case test failed&quot;.echo();
    };

    /* Test failure case */
    error_result = test_function(null);
    if (error_result.type() == $ERR) {
        &quot;Error case test passed&quot;.echo();
    } else {
        &quot;Error case test failed&quot;.echo();
    };
};
</code></pre></div>
<h3 id="6-use-parallel-processing-carefully">6. Use Parallel Processing Carefully</h3>
<div class="highlight"><pre><span></span><code>/* Test parallel operations with thread limits */
test_parallel_safely = op() {
    large_data = (10000).range(0, 1);

    /* Use limited threads for large datasets */
    /* Limit to 4 threads */
result = large_data.map(op(x) { x * 2; }, 4);

    if (result.len() == 10000) {
        &quot;Parallel processing test passed&quot;.echo();
    } else {
        &quot;Parallel processing test failed&quot;.echo();
    };
};
</code></pre></div>
<hr />
<h2 id="next-steps">Next Steps</h2>
<ul>
<li>Learn about <a href="./">Testing</a> your Grapa code</li>
<li>Check out the <a href="grep.md">Grep functionality</a> for advanced pattern matching</li>
<li>Review the <a href="../syntax/basic_syntax/">Syntax Quick Reference</a> for more syntax rules and tips</li>
</ul>
<h2 id="thread-safety-and-parallelism">Thread Safety and Parallelism</h2>
<p>Grapa is fully thread safe by design. All variable and data structure updates are internally synchronized at the C++ level, so you will never encounter crashes or corruption from concurrent access. However, if your program logic allows multiple threads to read and write the same variable or data structure, you may see <em>logical</em> race conditions (unexpected values, overwrites, etc.). This is a design consideration, not a stability issue. Minimize shared mutable state between threads unless intentional.</p>
<p><strong>Only <code>$thread()</code> objects provide explicit locking and unlocking via <code>lock()</code>, <code>unlock()</code>, and <code>trylock()</code>.</strong> To protect access to a shared resource, create a <code>$thread()</code> lock object and use it to guard access. Calling <code>.lock()</code> or <code>.unlock()</code> on a regular variable (like an array or scalar) will return an error.</p>
<p><strong>Canonical Example:</strong>
<div class="highlight"><pre><span></span><code>lock_obj = $thread();
lock_obj.lock();
/* ... perform thread-safe operations on shared data ... */
lock_obj.unlock();
</code></pre></div></p>
<p>See <a href="../sys/thread/">Threading and Locking</a> and <a href="../operators/function/">Function Operators: static and const</a> for details and best practices. </p>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.action.edit", "content.action.view", "content.tabs.link"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>